{"version":3,"sources":["+listBills.js","+orgChart.js","+swaps.js","+totalsChart.js","+treeChart.js","+yearChart.js","+custom.js","+loader.js"],"names":["imgerror","image","style","display","sortCounts","objects","sortable","object","push","sort","a","b","switchGunBills","year","console","log","$","empty","billURL","subjects","text","getJSON","done","data","getPercentage","total","val","pct","Math","round","numberOfBills","statusArray","sponsorArray","lobbiedArray","groupsArray","html","each","k","v","status","billDate","Date","parse","introduced","lobbied","billNumberArray","number","split","toUpperCase","title","purpose","dateArray","monthNames","parseInt","length","join","key","append","$divs","dateOrderedDivs","attr","subjectCounts","_","countBy","subjectList","groupCounts","groupList","click","this","selected","toggleClass","hide","find","show","statusCounts","lobbiedCounts","sponsorCounts","obj","last_name","maxLobbiedCount","barClass","inArray","gunControlGroups","maxStatusCount","splitArray","buildOrgChart","orgMargin","left","right","top","bottom","width","height","d3","csvParse","max","d","minDate","min","maxDate","x","scaleLinear","domain","range","y","xAxis","axisBottom","tickFormat","format","yAxis","axisLeft","orgSvg","select","orgGroup","call","series","columns","slice","map","value","serie","selectAll","enter","line","defined","filter","swapContent","side","removeClass","addClass","fadeOut","fadeIn","total_gc_content","annual_gc_content","tree_gc_content","legislation_gc_content","fbHead","storyURL","gcUrl","fbURL","fbgcUrl","leadText","storyTitle","shareTitle","gcTwitter","storyIMG","total_gr_content","annual_gr_content","tree_gr_content","legislation_gr_content","grUrl","fbgrUrl","grTwitter","buildTotalsChart","gunControlTotal","gunRightsTotal","grTotalPct","css","buildTreeChart","csvData","draw","leaves","id","rawGroup","group","substring","lastIndexOf","x0","y0","x1","y1","gunColors","on","window","switchData","toString","root","stratify","sum","treemap","scaleOrdinal","parentId","size","padding","currentYear","buildYearChart","yearChartSVG","margin","scaleBand","rangeRound","align","Year","nice","z","stack","categories","ticks","tickSize","pop","keys","bandwidth","heroWidth","i","remove","legend","reverse","load","dnLoader","document","ready","urlParam","name","results","RegExp","exec","location","href","heroHeight","resize","scrollTop","triggerDistance","offset","startYear","endYear","gunControlAnnuals","gunRightsAnnuals","gunOrgs","yearData","gunControl","spending","gunRights","index","gunRightsGroups","uniqBy","gunOrgCounts","orgArray","csvOrgData","yearArray","group1header","group2header","ind","orgIndex","expenditures","mainYear","forEach","gunControlTotals","getFullYear","facebookSVG","twitterSVG","youtubeSVG","websiteSVG","factory","define","amd","module","exports","jQuery","undefined","require","fn","action","self","bodyPosition","encodedIMGURL","encodeURIComponent","encodedURL","FB","ui","method","link","picture","description","open"],"mappings":"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","file":"scripts-bundle.js","sourcesContent":["var facebookSVG = '<svg class=\"social\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"35px\" height=\"35px\" viewBox=\"0 0 100 100\"><rect id=\"square\" fill=\"#D8D8D8\" width=\"100\" height=\"100\"/><path id=\"facebook\" fill=\"#FFFFFF\" d=\"M35.959,40.223h6.034v-5.865c0-2.588,0.065-6.576,1.944-9.046\tc1.979-2.618,4.696-4.397,9.369-4.397c7.611,0,10.818,1.086,10.818,1.086l-1.508,8.942c0,0-2.518-0.728-4.862-0.728\tc-2.351,0-4.448,0.842-4.448,3.188v6.821h9.623l-0.673,8.734h-8.95v30.342H41.994V48.957h-6.034V40.223z\"/></svg>';\n\nvar twitterSVG = '<svg class=\"social\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"35px\" height=\"35px\" viewBox=\"0 0 100 100\"><rect id=\"square\" fill=\"#D8D8D8\" width=\"100\" height=\"100\"/><path id=\"twitter\" fill=\"#FFFFFF\" d=\"M77.877,32.706c-2.051,0.911-4.258,1.525-6.569,1.803c2.362-1.416,4.176-3.659,5.028-6.328\tc-2.212,1.311-4.657,2.26-7.266,2.771c-2.082-2.221-5.058-3.611-8.349-3.611c-6.313,0-11.435,5.126-11.435,11.441\tc0,0.897,0.097,1.767,0.294,2.604c-9.506-0.479-17.932-5.027-23.577-11.955c-0.984,1.696-1.549,3.662-1.549,5.759\tc0,3.962,2.02,7.468,5.089,9.52c-1.874-0.058-3.64-0.576-5.183-1.429v0.141c0,5.544,3.942,10.168,9.178,11.218\tc-0.96,0.269-1.97,0.402-3.015,0.402c-0.737,0-1.456-0.067-2.151-0.202c1.454,4.542,5.677,7.852,10.684,7.941\tc-3.916,3.068-8.848,4.896-14.205,4.896c-0.924,0-1.836-0.052-2.729-0.156c5.062,3.243,11.075,5.138,17.534,5.138\tc21.042,0,32.543-17.429,32.543-32.551c0-0.496-0.01-0.991-0.03-1.479C74.405,37.014,76.348,35.001,77.877,32.706\"/></svg>';\n\nvar youtubeSVG = '<svg class=\"social\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"35px\" height=\"35px\" viewBox=\"0 0 100 100\"><rect id=\"square\" fill=\"#D8D8D8\" width=\"100\" height=\"100\"/><path id=\"youtube\" fill=\"#FFFFFF\" d=\"M60.825,50.137L41.487,61.494V38.776L60.825,50.137z M78.886,60.667V39.546\tc0,0,0-10.181-10.179-10.181h-38.71c0,0-10.173,0-10.173,10.181v21.121c0,0,0,10.181,10.173,10.181h38.71\tC68.707,70.848,78.886,70.848,78.886,60.667\"/></svg>';\n\nvar websiteSVG = '<svg class=\"social\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"35px\" height=\"35px\" viewBox=\"0 0 100 100\"><rect id=\"square\" fill=\"#D8D8D8\" width=\"100\" height=\"100\"/><rect id=\"webbox\" x=\"20\" y=\"29\" fill=\"#FFFFFF\" width=\"59\" height=\"42\"/><text transform=\"matrix(1 0 0 1 24.3213 54.5156)\" fill=\"#D8D8D8\" font-family=\"OpenSans-Bold\" font-size=\"20\">www</text></svg>';\n\n\n//Hide any image that throws a 404\nfunction imgerror(image) {\n    image.style.display = 'none';\n}\n\n//Sort counts for objects\nfunction sortCounts(objects) {\n    var sortable = [];\n    for (var object in objects)\n        sortable.push([object, objects[object]]);\n    sortable.sort(\n        function(a, b) {\n            return b[1] - a[1];\n        }\n    );\n    return sortable;\n}\n\n//Switch gun bill info based on year\nfunction switchGunBills(year) {\n\n    console.log(\"--------------   In switchGunBills()  --------------\");\n\n    //Clear out content\n    $('#bill-list').empty();\n\n    //Set data urls in one place\n    var billURL = \"data/gunBills\" + year + \".json\";\n    //var sponsorsURL = \"data/gunSponsors.json\";\n\n    //To hold parsed sponsor data\n    var sponsors = {};\n\n    //We're going to count who sponsored the most\n    var totalRepublicans = 0;\n    var totalDemocrats = 0;\n    var totalOther = 0;\n\n    //We're going to count by subject\n    var subjects = [];\n\n    //Stick year on end of heads\n    $(\".head-year\").text(year);\n\n    //Get bill information\n    $.getJSON(billURL).done(function(data) {\n\n        //Holds number fo bills\n        var numberOfBills = 0;\n        //Hold counts for each status\n        var statusArray = [];\n        //Hold counts for each sponsor\n        var sponsorArray = [];\n        //Hold counts for each party\n        var partyArray = [];\n        //Hold counts for each group\n        var lobbiedArray = [];\n        //Hold counts for each sponsor\n        var groupsArray = [];\n        //Hold counts for each subject\n        var subjectsArray = [];\n\n        //Reset list div\n        $('#bill-list').html(\"\")\n\n        $(\"#bill-groups\").empty().html(\"<strong>View by groups:</strong><br/>\");\n        $(\"#bill-parties\").empty().html(\"<strong>View by party:</strong><br/>\");\n        $(\"#bill-tags\").empty().html(\"<strong>View by tags:</strong><br/>\");\n\n        $.each(data, function(k, v) {\n            if (v[\"subjects-top-term\"] != \"Native Americans\" && v[\"subjects-top-term\"] != \"Animals\" && v[\"subjects-top-term\"] != \"Agriculture and food\" && v[\"subjects-top-term\"] != \"Economics and public finance\" && v[\"subjects-top-term\"] != \"Education\" && v[\"subjects-top-term\"] != \"Energy\" && v[\"subjects-top-term\"] != \"Labor and employment\" && v[\"subjects-top-term\"] != \"Private legislation\" && v[\"subjects-top-term\"] != \"Water resources development\") {\n\n                //Increment totals\n                numberOfBills++;\n                statusArray.push(v.status);\n                //sponsorArray.push(v.sponsor.first_name+\" \"+v.sponsor.last_name);\n\n                var billDate = Date.parse(v.introduced);\n\n                var html = \"\";\n                html += \"<div data-date='\" + billDate + \"'data-tag='\" + v[\"subjects-top-term\"] + \"' data-groups='\"+ v.lobbied+\"' class='bill'>\";\n\n                //Bill number\n                billNumberArray = v.number.split(\"-\");\n                html += \"     <span class='bill-header bill-number'>\" + billNumberArray[0].toUpperCase() + \"</span>\";\n\n                //Bill subject used for tagging\n                html += \"     <span class='bill-tag'>\" + v[\"subjects-top-term\"] + \"</span>\";\n                subjects.push(v[\"subjects-top-term\"]);\n\n                //Short title if available\n                if (v[\"short-title\"]) {\n                    html += \"     <p class='bill-name'>\" + v[\"short-title\"] + \"</p>\";\n                } else {\n                    html += \"     <p class='bill-name'>\" + v.title + \"</p>\";\n                }\n\n                //Purpose if available\n                if (v.purpose != \"null\") {\n                    html += \"<p class='bill-purpose'>\" + v.purpose + \"</p>\";\n                } else {\n                    html += \"<p class='bill-purpose'>No purpose specified</p>\";\n                }\n                //Bill introduction date\n                //Date introduced\n                var dateArray = v.introduced.split(\"-\");\n                html += \"     <span class='bill-date'><strong>Introduced: </strong>\"+monthNames[(parseInt(dateArray[1]) - 1)] + \" \" + dateArray[2] + \", \" + dateArray[0] +\"</span>\"\n                //Date introduced\n                var dateArray = v[\"status-at\"].split(\"-\");\n                //console.log(dateArray);\n                html += \"     <span class='bill-date'><strong>Most recent update: </strong>\"+monthNames[(parseInt(dateArray[1]) - 1)] + \" \" + dateArray[2] + \", \" + dateArray[0] +\"</span>\"\n                //Bill status\n                if (v.status.length > 0) {\n                  html += \"     <span class='bill-status'><strong>Status: </strong>\" + v.status.join(\" => \") + \"</span>\";\n                } else {\n                  html += \"     <span class='bill-status'><strong>Status: </strong>Not listed</span>\";\n                }\n\n                // Lobbied list\n                //console.log(v.lobbied);\n                $.each(v.lobbied, function (key,val){\n                    lobbiedArray.push(val);\n                    groupsArray.push(val);\n               });\n                html += \"     <span class='sponsor-lobbied'><strong>Lobbied by: </strong> \" + v.lobbied.join(', ') + \"</span>\";\n\n                html += \"<a class='bill-link' href='https://www.govtrack.us/congress/bills/\"+billNumberArray[1]+\"/\"+billNumberArray[0]+\"/text' target='_blank'>Read the bill</a>\";\n\n                //Bill sponsor\n                // if (v.sponsor.last_name) {\n                //\n                //     //Sponsor party\n                //     if (v.sponsor.party === \"R\"){\n                //         html += \"     <div class='bill-sponsor republican'>\";\n                //     } else if (v.sponsor.party === \"D\"){\n                //         html += \"     <div class='bill-sponsor democrat'>\";\n                //     }\n                //\n                //     html += \"     <strong>Sponsor</strong>\";\n                //\n                //     //If govtrack then we have a photo\n                //     if( v.sponsor.govtrack_id ){\n                //         //Sponsor mug\n                //         html += \"     <div class='mugBox clearFix\";\n                //         if (v.sponsor.party === \"R\"){\n                //             html += \" mugBoxR \";\n                //         } else if (v.sponsor.party === \"D\"){\n                //             html += \" mugBoxD \";\n                //         }\n                //          html += \"'><img class='bill-mug' src='https://www.govtrack.us/data/photos/\" + v.sponsor.govtrack_id + \"-100px.jpeg'/></div>\";\n                //     }\n                //\n                //\n                //     //Hold parties for counting\n                //     partyArray.push(v.sponsor.party);\n                //\n                //     html += \"          <span class='sponsor-name'>\" + v.sponsor.title + \". \" + v.sponsor.first_name + \" \" + v.sponsor.last_name + \" (\" + v.sponsor.party + \"-\" + v.sponsor.state + \")</span>\";\n                //     //Sponsor status\n                //     if (v.sponsor.in_office === true) {\n                //         html += \"<span class='sponsor-status'>Status: In office</span>\";\n                //     } else {\n                //         html += \"<span class='sponsor-status'>Status: Out of office</span>\";\n                //     }\n                //\n                //     //console.log(v);\n                //     if (v.sponsor[\"facebook_id\"]){\n                //         html += \"<a class='social-buttons' href='https://www.facebook.com/\"+v.sponsor['facebook_id']+\"' target='_blank'>\"+facebookSVG+\"</a>\";\n                //     }\n                //     if (v.sponsor[\"twitter_id\"]){\n                //         html += \"<a class='social-buttons' href='https://www.twitter.com/\"+v.sponsor['twitter_id']+\"' target='_blank'>\"+twitterSVG+\"</a>\";\n                //     }\n                //     if (v.sponsor[\"youtube_id\"]){\n                //         html += \"<a class='social-buttons' href='https://www.youtube.com/\"+v.sponsor['youtube_id']+\"' target='_blank'>\"+youtubeSVG+\"</a>\";\n                //     }\n                //     if (v.sponsor[\"website\"]){\n                //         html += \"<a class='social-buttons' href='\"+v.sponsor['website']+\"' target='_blank'>\"+websiteSVG+\"</a>\";\n                //     }\n                //\n                //     html += \"     </div>\";\n                //\n                //     var countObj = {};\n                //     countObj.party = v.sponsor.party;\n                //     countObj.govtrack = v.sponsor.govtrack_id;\n                //     countObj.last_name = v.sponsor.last_name;\n                //     countObj.first_name = v.sponsor.first_name;\n                //     countObj.in_office = v.sponsor.in_office;\n                //     sponsorArray.push(countObj);\n                //\n                //\n                // } else {\n                //     html += \"     <div class='bill-sponsor'>\";\n                //     html += \"     <strong>Sponsor</strong>\";\n                //     html += \"          <span class='sponsor-name'>No sponsor information available</span>\";\n                //     html += \"     </div>\";\n                // }\n\n\n                html += \"</div>\";\n\n                $('#bill-list').append(html);\n            }\n\n        });\n        $divs = $(\".bill\");\n\n        var dateOrderedDivs = $divs.sort(function(a, b) {\n            return $(a).attr(\"data-date\") - $(b).attr(\"data-date\");\n        });\n        $(\"#bill-list\").html(dateOrderedDivs);\n\n\n        //Build, display and activate subject tags\n        var subjectCounts = _.countBy(subjects);\n        //console.log(subjectCounts);\n\n        var subjectList = [];\n        $.each(subjectCounts, function(key, val) {\n            subjectList.push(key);\n        });\n        subjectList.sort();\n        $.each(subjectList, function(key, val) {\n            $(\"#bill-tags\").append(\"<span class='tag' data-tag='\" + val + \"'>\" + val + \"</span>\");\n        });\n\n\n        //Build, display and activate subject tags\n        var groupCounts = _.countBy(groupsArray);\n        //console.log(groupCounts);\n\n        var groupList = [];\n        $.each(groupCounts, function(key, val) {\n            groupList.push(key);\n        });\n        groupList.sort();\n        $.each(groupList, function(key, val) {\n            $(\"#bill-groups\").append(\"<span class='tag' data-group='\" + val + \"'>\" + val + \"</span>\");\n        });\n\n        //Build, display and activate subject tags\n        //console.log(partyArray);\n        //var partyCounts = _.countBy(partyArray);\n        //console.log(partyCounts);\n\n        // var partyList = [];\n        // $.each(partyCounts, function(key, val) {\n        //     partyList.push(key);\n        // });\n        // partyList.sort();\n        // $.each(partyList, function(key, val) {\n        //     $(\"#bill-parties\").append(\"<span class='tag' data-party='\" + val + \"'>\" + val + \"</span>\");\n        // });\n\n        $(\".tag\").click(function() {\n\n            //console.log(\"Clicked a tag.\")\n            //IF ITS A TAG BUTTON\n            if ( $(this).data(\"tag\") ){\n                var selected = $(this).data(\"tag\");\n                $(this).toggleClass(\"selected-tag\");\n                $(\".bill\").hide();\n                $('#bill-list').find(\"[data-tag='\" + selected + \"']\").toggleClass(\"selected-tag\");\n                $(\".selected-tag\").show();\n            };\n            //IF ITS A PARTY BUTTON\n            if ( $(this).data(\"party\") ){\n                //console.log($(this).data(\"party\"));\n                var selected = $(this).data(\"party\");\n                $(this).toggleClass(\"selected-tag\");\n                $(\".bill\").hide();\n                $('#bill-list').find(\"[data-party='\" + selected + \"']\").toggleClass(\"selected-tag\");\n                $(\".selected-tag\").show();\n            };\n            //IF ITS A GROUP BUTTON\n            if ( $(this).data(\"group\") ){\n                //console.log($(this).data(\"group\"));\n                var selected = $(this).data(\"group\");\n                $(this).toggleClass(\"selected-tag\");\n                $(\".bill\").hide();\n\n                $('#bill-list').find(\"[data-groups*='\" + selected + \"']\").toggleClass(\"selected-tag\");\n\n                $(\".selected-tag\").show();\n            };\n        });\n\n\n\n        //Do counts\n        //STATUS COUNTS\n        statusCounts = _.countBy(statusArray);\n        //console.log(statusCounts);\n\n        //ORG COUNTS\n        lobbiedCounts = _.countBy(lobbiedArray);\n        //console.log(lobbiedCounts);\n\n        //SPONSOR COUNTS\n        sponsorCounts = _.countBy(sponsorArray, function(obj){\n            return obj.last_name;\n        });\n\n        //console.log(sponsorCounts);\n\n        // //Get top 3 sponsors\n        // sponsorCountsArray = sortable.slice(0, 3);\n        // console.log(sponsorCountsArray);\n\n        statusCounts = sortCounts(statusCounts);\n        // partyCounts = sortCounts(partyCounts);\n        lobbiedCounts = sortCounts(lobbiedCounts);\n        sponsorCounts = sortCounts(sponsorCounts);\n\n        //console.log(lobbiedCounts);\n        //console.log(statusCounts);\n        // console.log('partyCounts', partyCounts);\n        //console.log(sponsorCounts);\n\n        function getPercentage(total,val){\n            pct = val/total*100;\n            if (pct>90){\n                return 90;\n            } else if (pct<1){\n                return 1;\n            } else {\n                return Math.round(pct);\n            }\n        }\n\n\n        $(\".byOrg\").empty().html(\"<h3>Organizations and the number of bills they lobbied in \"+year+\"</h3>\");\n        var lobbiedTotal;\n        // $.each(lobbiedCounts, function(k, v) {\n        //     console.log(parseInt(v[1]));\n        // });\n        var maxLobbiedCount = lobbiedCounts[0][1]\n        $.each(lobbiedCounts, function(k, v) {\n            var barClass;\n             html = \"<div class='list-element'>\";\n             if ($.inArray(v[0], gunControlGroups) >= 0){\n                barClass = \"gc\";\n             } else {\n                barClass = \"gr\";\n             }\n             html += \"     <span class='list-item'>\"+v[0]+\"</span>\";\n             html += \"     <div class='bar-container'>\";\n             html += \"          <div class='list-bar \"+barClass+\"' style='width:\"+getPercentage(maxLobbiedCount,v[1])+\"%'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n             html += \"     </div>\";\n             html += \"</div>\";\n            $(\".byOrg\").append(html);\n        });\n\n\n        // $(\".bySponsor\").empty().html(\"<h3>The top five sponsors of gun-related legislation</h3>\");\n        // for ( i=1; i<=5; i++){\n        //     if ( sponsorCounts[i][0] ){\n        //         //console.log(i);\n        //         html = \"<li>\"+sponsorCounts[i][0]+\": \" + sponsorCounts[i][1] + \" pieces of legislation.</li>\";\n        //         $(\".bySponsor\").append(html);\n        //     } else {\n        //         //console.log(i);\n        //     }\n        // }\n\n        $(\".byStatus\").empty().html(\"<h3>Status breakdown of gun-related legislation introduced in \"+year+\"</h3>\");\n        var statusTotal;\n        var maxStatusCount = statusCounts[0][1];\n        $.each(statusCounts, function(k, v) {\n            html = \"<div class='list-element'>\";\n            var splitArray = v[0].split(\",\");\n            html += \"     <span class='list-item'>\"+splitArray.join(\" => \")+\"</span>\";\n            html += \"     <div class='bar-container'>\";\n            html += \"          <div class='list-bar' style='width:\"+getPercentage(maxStatusCount,v[1])+\"%;background:#BF531B'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n            html += \"     </div>\";\n            html += \"</div>\";\n            $(\".byStatus\").append(html);\n        });\n\n        // $(\".byParty\").empty().html(\"<h3> Gun-related legislation introduced by party in \"+year+\"</h3>\");\n        // var partyTotal;\n        // var maxPartyCount = partyCounts[0][1];\n        //\n        // $.each(partyCounts, function(k, v) {\n        //     //console.log(v);\n        //     html = \"<div class='list-element'>\";\n        //     //console.log(v[0]);\n        //     switch (v[0]){\n        //         case \"R\":\n        //             html += \"     <span class='list-item'>Republican</span>\";\n        //             break;\n        //         case \"D\":\n        //             html += \"     <span class='list-item'>Democrat</span>\";\n        //             break;\n        //         case \"I\":\n        //             html += \"     <span class='list-item'>Independent</span>\";\n        //             break;\n        //         default:\n        //             html += \"     <span class='list-item'>Other</span>\";\n        //             break;\n        //     }\n        //\n        //     html += \"<div class='bar-container'>\";\n        //\n        //     switch (v[0]){\n        //         case \"R\":\n        //             html += \"<div class='list-bar republican' style='width:\"+getPercentage(maxPartyCount,v[1])+\"%'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n        //             break;\n        //         case \"D\":\n        //             html += \"<div class='list-bar democrat' style='width:\"+getPercentage(maxPartyCount,v[1])+\"%'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n        //             break;\n        //         default:\n        //             html += \"<div class='list-bar \"+v[0]+\"' style='width:\"+getPercentage(maxPartyCount,v[1])+\"%'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n        //             break;\n        //     }\n        //\n        //\n        //     html += \"     </div>\";\n        //     html += \"</div>\";\n        //     $(\".byParty\").append(html);\n        // });\n\n\n    });\n}\n","function buildOrgChart(data) {\n    console.log(\"--------------   In buildOrgChart()  --------------\");\n    //console.log(data);\n    var gunColors = [\"#4295DE\", \"#D8322A\"];\n    /*\n    ----------------------------------------\n          INITIALIZE THE SVG CONTAINER\n    ----------------------------------------\n    */\n\n    var orgMargin = {left:50,right:50,top:40,bottom:40};\n    var width = $(\"#orgChart\").width();\n    var height = 500;\n\n    //Parse csv into array of objects\n    var data = d3.csvParse(data);\n    //console.log(data);\n    var max = d3.max(data,function(d){ return parseInt(d[\"Violence Policy Center\"])});\n    var minDate = d3.min(data,function(d){return parseInt(d.year);})\n    var maxDate = d3.max(data,function(d){return parseInt(d.year);})\n    var x = d3.scaleLinear()\n        .domain([minDate,maxDate])\n        .range([0,width]);\n    var y = d3.scaleLinear()\n        .domain([0,max])\n        .range([height,0]);\n    var xAxis = d3.axisBottom(x)\n        .tickFormat(d3.format(\"\"));\n    var yAxis = d3.axisLeft(y)\n        .tickFormat(d3.format(\".2s\"));\n\n    var orgSvg = d3.select(\"#orgChart\")\n        .append(\"svg\")\n            .attr(\"height\",height+orgMargin.bottom)\n            .attr(\"width\",width);\n\n    var orgGroup = orgSvg.append(\"g\")\n        .attr(\"transform\",\"translate(\"+orgMargin.left+\",10)\")\n\n    orgGroup.append(\"g\").attr(\"class\",\"x axis\").attr(\"transform\",\"translate(0,\"+height+\")\").call(xAxis);\n    orgGroup.append(\"g\").attr(\"class\",\"y axis\").call(yAxis);\n\n    var series = data.columns.slice(1).map(function(key) {\n        return data.map(function(d) {\n            return {\n                key: key,\n                year: d.year,\n                value: d[key]\n            };\n        });\n    });\n\n    //console.log(series);\n\n\n    var serie = orgGroup.selectAll(\".serie\")\n        .data(series)\n        .enter().append(\"g\")\n        .attr(\"class\", \"serie\");\n\n    serie.append(\"path\")\n        .attr(\"class\", \"line\")\n        .style(\"stroke\", function(d) { return d[0].key; })\n        .attr(\"d\", d3.line()\n        .x(function(d) { return y(d.year); })\n        .y(function(d) { return y(d.value); }));\n\n    var line = d3.line()\n        .defined(function(d) { //console.log(d);\n            if (d.value>0)return d; })\n        .y(function(d){return y(d.value);})\n        .x(function(d){return x(d.year)});\n\n    orgGroup.append(\"path\").attr(\"d\",line(data));\n\n    orgGroup.selectAll(\".dot\")\n        .data(data.filter(function(d) { if (d[\"Violence Policy Center\"]>0)return d; }))\n        .enter().append(\"circle\")\n        .attr(\"class\", \"dot\")\n        .attr(\"cx\", line.x())\n        .attr(\"cy\", line.y())\n        .attr(\"r\", 7);\n\n}\n","function swapContent(side){\n\n    console.log(\"--------------   In swapContent() with \"+side+\" --------------\");\n\n    if (side === \"gc\"){\n        console.log(\"side = \"+side);\n        $(\".gr-back\").removeClass(\"gr-back\").addClass(\"gc-back\");\n        $(\".gr-dark\").removeClass(\"gr-dark\").addClass(\"gc-dark\");\n        $(\"#hero-border.gr\").removeClass(\"gr\").addClass(\"gc\");\n        $(\"#gr-intro\").fadeOut(\"fast\", function() {\n            $(\"#gc-intro\").fadeIn();\n        });\n        // $(\"#gr-intro\").slideUp(\"slow\", function() {\n        //     $(\"#gc-intro\").slideDown(\"slow\");\n        // });\n        //Swap text\n        $(\"#total-chart .intro\").text(total_gc_content);\n        $(\"#year-chart .intro\").text(annual_gc_content);\n        $(\"#tree-chart .intro\").text(tree_gc_content);\n        $(\"#bill-breakdown .intro\").text(legislation_gc_content);\n        $(\"#hero-gr\").fadeOut();\n        $(\"#hero-gc\").fadeIn();\n\n        fbHead = \"Losing the battle for guns\"\n        storyURL = gcUrl;\n        fbURL = fbgcUrl;\n        leadText = \"Another mass shooting, another futile attempt at out-flanking the gun lobby.\";\n        storyTitle = shareTitle = gcTwitter;\n        storyIMG = \"http://interactives.dallasnews.com/2016/gun-fight/images/_gcShare.jpg\";\n\n\n    } else {\n        console.log(\"side = \"+side);\n        $(\".gc-back\").removeClass(\"gc-back\").addClass(\"gr-back\");\n        $(\".gc-dark\").removeClass(\"gc-dark\").addClass(\"gr-dark\");\n        $(\"#hero-border.gc\").removeClass(\"gc\").addClass(\"gr\");\n        $(\"#gc-intro\").fadeOut(\"fast\", function() {\n            $(\"#gr-intro\").fadeIn();\n        });\n        //Swap text\n        $(\"#total-chart .intro\").text(total_gr_content);\n        $(\"#year-chart .intro\").text(annual_gr_content);\n        $(\"#tree-chart .intro\").text(tree_gr_content);\n        $(\"#bill-breakdown .intro\").text(legislation_gr_content);\n        $(\"#hero-gc\").fadeOut();\n        $(\"#hero-gr\").fadeIn();\n\n        fbHead = \"Lobbyists defending the Second Amendment\"\n        storyURL = grUrl;\n        fbURL = fbgrUrl;\n        leadText = \"Every year the gun lobby spends millions fending off assaults on the Constitution.\";\n        storyTitle = shareTitle = grTwitter;\n        storyIMG = \"http://interactives.dallasnews.com/2016/gun-fight/images/_grShare.jpg\";\n\n    }\n\n    $(\"#totalChart .intro\").text([\"total_\"+side+\"_content\"]);\n\n   //  //SET TWITTER TEXT\n   //  $(\".twitterShare a\").attr(\"href\",'https://twitter.com/intent/tweet?text='+leadText+' %7C @DMNOpinion&url='+storyURL);\n    //\n   //  //SET FACEBOOK shareTitle\n   //  $(\".facebookShare a\").attr(\"href\",'https://www.facebook.com/sharer/sharer.php?u='+encodeURI(storyURL));\n    //\n   //  //SET EMAIL PREFERENCES\n   //  $(\".emailShare a\").attr(\"href\",'mailto:?subject='+encodeURI(storyTitle)+'&body='+encodeURI(storyURL));\n\n}\n\n\n//Switch theme/content button\n$(\".button-gc\").click(function() {\n    swapContent(\"gc\");\n});\n$(\".button-gr\").click(function() {\n    swapContent(\"gr\");\n});\n\n//-----------  SHARING -----------//\nvar encodedIMGURL = encodeURIComponent(storyIMG);\n\nvar encodedURL = encodeURIComponent(storyURL);\n\n\n$(\".fbShare\").click(function() {\n   //Facebook share\n   console.log(fbHead+\": \"+leadText);\n   FB.ui({\n       method: 'feed',\n       name: fbHead,\n       link: fbURL,\n       //link: 'http://interactives.dallasnews.com/test/'+targetName+'/index.html',\n       //caption: 'Use our meme generator to create your own!',\n       picture: storyIMG,\n       description: leadText\n   });\n});\n\n$(\".twShare\").click(function() {\n   console.log(\"storyURL: \"+storyURL);\n   //console.log(\"Share to Twitter:\\nstoryTitle: \" + storyTitle + \"\\nencodedURL: \" + encodedURL + \"\\nencodedIMGURLt: \" + encodedIMGURL);\n   //Twitter share quizShare\n   window.open(\"https://www.twitter.com/intent/tweet?hashtags=2a,guncontrol&text=\" + leadText + \" &via=dallasnews&url=\" + storyURL + \"&image=\" + encodedIMGURL, \"top=200, left=200,width=550,height=420\");\n})\n","function buildTotalsChart(gunControlTotal, gunRightsTotal) {\n\n  console.log(\"--------------   In buildTotalsChart()  --------------\");\n  //console.log(\"gunControlTotal: \" + gunControlTotal);\n  //console.log(\"gunRightsTotal: \" + gunRightsTotal);\n\n  var total = gunControlTotal + gunRightsTotal;\n  //console.log(\"TOTAL: \"+total);\n  var grTotalPct = Math.round(gunRightsTotal / total * 100);\n  //console.log(grTotalPct + \"%\");\n  //console.log(100-grTotalPct + \"%\");\n  $(\"#totals-gr-amount\").html( \"$\"+d3.format(\".2s\")(gunRightsTotal));\n  $(\"#totals-gc-amount\").html( \"$\"+d3.format(\".2s\")(gunControlTotal));\n  $(\"#grBar\").css(\"width\", grTotalPct + \"%\");\n  $(\"#gcBar\").css(\"width\", 100-grTotalPct + \"%\");\n\n}\n","function buildTreeChart(csvData) {\n\n    // Define the div for the tooltip\n    var div = d3.select(\"body\").append(\"div\")\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0);\n\n    function type(d) {\n        d.value = +d.value;\n        return d;\n    }\n\n    console.log(\"--------------   In buildTreeChart()  --------------\");\n\n    var width = $(\"#treeChart\").width();\n    var height = 500;\n\n    var gunColors = [\"#88C5F2\", \"#E3C357\"];\n\n    //var format = d3.format(\",d\");\n    var format = d3.format(\",.0f\");\n\n    var color = d3.scaleOrdinal()\n        .domain([\"gc\", \"gr\"])\n        .range(gunColors);\n\n    var stratify = d3.stratify()\n        .parentId(function(d) {\n            return d.id.substring(0, d.id.lastIndexOf(\".\"));\n        });\n\n    var treemap = d3.treemap()\n        .size([width, height])\n        .padding(1)\n        .round(true);\n\n    var data = d3.csvParse(csvData, function(d) {\n        var splitArray = d.id.split(\".\");\n        if (splitArray[1] === currentYear || splitArray.length == 1) {\n            return {\n                id: d.id, // lowercase\n                value: +d.value // lowercase\n            };\n        }\n    });\n\n    //console.log(data);\n\n    var root = stratify(data)\n        .sum(function(d) {\n            return d.value;\n        })\n        .sort(function(a, b) {\n            return b.height - a.height || b.value - a.value;\n        });\n\n    //console.log(root);\n\n    treemap(root);\n\n    function draw(data) {\n        $(\"#treeChart\").empty();\n        d3.select(\"#treeChart\")\n            .selectAll(\".node\")\n            .data(data.leaves())\n            .enter().append(\"div\")\n            .attr(\"class\", \"node\")\n            .attr(\"group\", function(d) {\n                var title = d.id;\n                var rawGroup = title.split(/\\r?\\n|\\r/);\n                var group = rawGroup[0].substring(rawGroup[0].lastIndexOf(\".\") + 1)\n                return group;\n            })\n            .attr(\"expenditure\", function(d) {\n                return d.value;\n            })\n            .style(\"left\", function(d) {\n                return d.x0 + \"px\";\n            })\n            .style(\"top\", function(d) {\n                return d.y0 + \"px\";\n            })\n            .style(\"width\", function(d) {\n                return d.x1 - d.x0 + \"px\";\n            })\n            .style(\"height\", function(d) {\n                return d.y1 - d.y0 + \"px\";\n            })\n            .style(\"background\", function(d) {\n                var splitArray = d.id.split(\".\");\n                if (splitArray[2] === \"gr\") {\n                    return gunColors[1];\n                } else {\n                    return gunColors[0];\n                }\n            })\n            .on(\"mouseover\", function(d) {\n                console.log(\"mouseover\");\n                var html = \"<span class='callout-label'>\"+$(this).attr('group')+\"</span>\";\n                    html += \"$\"+ format($(this).attr('expenditure'));\n                $(\".callout-treemap\").html(html);\n                $(\".callout-treemap\").show();\n                if ( $(window).width() >= 1000 ){\n                    $(\".callout-treemap-mobile\").hide();\n                }\n\n            })\n            .on(\"mouseout\", function() {\n                console.log(\"mouseout\");\n            })\n            .append(\"div\")\n            .attr(\"class\", \"node-label\")\n            .text(function(d) {\n                var width = d.x1 - d.x0;\n                var height = d.y1 - d.y0;\n                if (width >= 80 && height >= 80) {\n                    return d.id.substring(d.id.lastIndexOf(\".\") + 1).split(/(?=[A-Z][^A-Z])/g).join(\"\\n\");\n                }\n\n            })\n            .append(\"div\")\n            .attr(\"class\", \"node-value\")\n            .text(function(d) {\n                var width = d.x1 - d.x0;\n                var height = d.y1 - d.y0;\n                if (width >= 80 && height >= 80) {\n                    return \"$\" + format(d.value);\n                }\n            });\n    }\n\n    draw(root);\n\n    function switchData(year) {\n        console.log(\"switchData(\" + year + \")\");\n\n        var data = d3.csvParse(csvData, function(d) {\n            var splitArray = d.id.split(\".\");\n            if (splitArray[1] === year.toString() || splitArray.length == 1) {\n                return {\n                    id: d.id, // lowercase\n                    value: +d.value // lowercase\n                };\n            }\n        });\n        console.log(data);\n\n        var root = stratify(data)\n            .sum(function(d) {\n                return d.value;\n            })\n            .sort(function(a, b) {\n                return b.height - a.height || b.value - a.value;\n            });\n        console.log(root);\n\n        treemap(root);\n        draw(root);\n\n    }\n\n    switchGunBills(currentYear);\n\n    //$(\"#yearSelector\").change(function () {\n    //var year = $(\"#yearSelector\").val();\n    $(\".drop-menu li\").click(function() {\n        currentYear = $(this).data(\"selectedyear\");\n        switchData(currentYear);\n        switchGunBills(currentYear);\n        console.log(currentYear);\n        $(\".pulldown\").text(currentYear);\n    });\n\n\n}\n","function buildYearChart(data) {\n\n  console.log(\"--------------   In buildYearChart()  --------------\");\n  // console.log(data);\n\n  var width = $(\"#yearChart\").width();\n  var height = 500;\n\n  var gunColors = [\"#88C5F2\", \"#E3C357\"];\n\n  /*\n  ----------------------------------------\n        INITIALIZE THE SVG CONTAINER\n  ----------------------------------------\n  */\n\n  var yearChartSVG = d3.select(\"#yearChart\").append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n  var margin = {\n    top: 5,\n    right: 0,\n    bottom: 17,\n    left: 25\n  };\n  width = width - margin.left - margin.right;\n  height = height - margin.top - margin.bottom;\n  group = yearChartSVG.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n  /* RANGES AND DOMAINS\n  ----------------------------------------\n                  X\n  ----------------------------------------\n  */ //Set the X range from 0 - width of div\n  var x = d3.scaleBand()\n    .rangeRound([0, width])\n    .padding(0.1)\n    .align(0.1);\n\n  //Set the X domain to the \"Year\" attribute\n  x.domain(data.map(function (d) {\n    return d.Year;\n  }));\n\n\n  /*\n  ----------------------------------------\n                  Y\n  ----------------------------------------\n  */ //Set the Y range from 0 - width of div\n  var y = d3.scaleLinear()\n    .rangeRound([height, 0]);\n\n  //Set the Y domain to the \"Total\" attribute\n  y.domain([0, d3.max(data, function (d) {\n    return d.total;\n  })]).nice();\n\n  /*\n  ----------------------------------------\n                  Z\n  ----------------------------------------\n  */ //Set the Z range which looks like color bars\n  var z = d3.scaleOrdinal()\n    .range([gunColors[0], gunColors[1]]);\n\n  //Set the Z domain or color key\n  z.domain([\"Gun Control\", \"Gun Rights\"]);\n\n  /*\n  ----------------------------------------\n                   Stack\n  ----------------------------------------\n  */ //sets the stack generator to \"stack\"\n  var stack = d3.stack();\n\n  /*\n  ----------------------------------------\n          Define the categories\n  ----------------------------------------\n  */ //Since the json has other attributes, manually set the ones to chart\n\n  var categories = [\"Gun Control\", \"Gun Rights\"];\n\n  group.append(\"g\")\n    .attr(\"class\", \"axis axis--x\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x));\n\n  group.append(\"g\")\n    .attr(\"class\", \"axis axis--y\")\n    .call(d3.axisLeft(y).ticks(10, \"s\").tickSize(width*-1))\n    .append(\"text\")\n    .attr(\"x\", 2)\n    .attr(\"y\", y(y.ticks(10).pop()))\n    .attr(\"dy\", \"0.35em\");\n\n\n  group.selectAll(\".serie\")\n    .data(stack.keys(categories)(data))\n    .enter().append(\"g\")\n    .attr(\"class\", \"serie\")\n    .attr(\"fill\", function (d) {\n      return z(d.key);\n    })\n    .selectAll(\"rect\")\n    .data(function (d) {\n      return d;\n    })\n    .enter().append(\"rect\")\n    .attr(\"x\", function (d) {\n      return x(d.data.Year);\n    })\n    .attr(\"y\", function (d) {\n      return y(d[1]);\n    })\n    .attr(\"height\", function (d) {\n      return y(d[0]) - y(d[1]);\n    })\n    .attr(\"width\", x.bandwidth());\n\n\n    /*\n    Disable ticks\n    */\n    var heroWidth = $(\"#hero-gc\").width();\n   if (heroWidth < 500) {\n       var ticks = d3.selectAll(\".tick text\");\n       ticks.attr(\"class\", function(d, i) {\n           if (i % 2 != 0) d3.select(this).remove();\n       });\n   }\n\n  /*\n  ----------------------------------------\n        Add the legend\n  ----------------------------------------\n  */\n  var legend = group.selectAll(\".legend\")\n    .data(categories.reverse())\n    .enter().append(\"g\")\n    .attr(\"class\", \"legend\")\n    .attr(\"transform\", function (d, i) {\n      return \"translate(0,\" + i * 20 + \")\";\n    })\n    .style(\"font\", \"10px sans-serif\");\n\n  legend.append(\"rect\")\n    .attr(\"x\", 10)\n    .attr(\"y\", 8)\n    .attr(\"width\", 18)\n    .attr(\"height\", 18)\n    .attr(\"fill\", z);\n\n  legend.append(\"text\")\n    .attr(\"x\", 35)\n    .attr(\"y\", 16)\n    .attr(\"dy\", \".35em\")\n    .attr(\"text-anchor\", \"start\")\n    .text(function (d) {\n      return d;\n    });\n\n}\n","$(window).load(function() {\n    $(\"body\").dnLoader(\"remove\");\n});\n\n$(document).ready(function() {\n\n    //GET URL PARAM\n    $.urlParam = function(name) {\n        var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n        //if no var then just use \"gc\"\n        if (results) {\n            return results[1] || 0;\n        } else {\n            return \"gc\";\n        }\n    }\n    var side = $.urlParam('side');\n    console.log(side);\n\n    //Initialize display\n    swapContent(side);\n    //$(\"#hero-gr\").hide();\n\n    //Get height of img\n    var heroHeight = $(\"#hero-gc\").height();\n    $(\"#hero\").height(heroHeight);\n\n    $(window).resize(function() {\n        heroHeight = $(\"#hero-gc\").height();\n        $(\"#hero\").height(heroHeight);\n    });\n\n    $(window).on('scroll', function() {\n        var scrollTop = $(this).scrollTop();\n        var triggerDistance = $(\".intro-box\").offset().top;\n        if ((triggerDistance - 100) < scrollTop) {\n            $(\".fixed-buttons-bar\").fadeIn();\n        } else {\n            $(\".fixed-buttons-bar\").hide();\n        }\n    });\n\n    var startYear = 2000;\n    var endYear = 2017;\n\n    var gunControlAnnuals = {};\n    var gunRightsAnnuals = {};\n\n    var indices = [\"Gun Control\", \"Gun Rights\"];\n\n    //Array of unique gun orgs\n    var gunOrgs = [];\n\n    var yearData = [];\n\n    for (i = startYear; i <= endYear; i++) {\n        $(\".drop-menu\").append(\"<li data-selectedYear=\" + i + \">\" + i + \"</li>\");\n    }\n\n    $.getJSON(\"data/gunOrgSpending.json\", function(data) {\n      console.log('DATA', data);\n\n        // Shortcut to groups\n        var gunControl = data.spending[0].gunControl;\n        var gunRights = data.spending[1].gunRights;\n\n        //Build arrays for each groups\n\n\n        /*---------------------------------------------------------------\n        \t\t\t BUILD ORG FEVERS csv\n        ---------------------------------------------------------------*/\n\n        //Build an array of ALL gun orgs\n        for (i = startYear; i <= endYear; i++) {\n            $.each(gunControl, function(index, value) {\n                //console.log();\n                $.each(value, function(index, value) {\n                    gunOrgs.push(value.name);\n                    //Add to group arrays for counting sides\n                    gunControlGroups.push(value.name);\n                });\n            });\n            $.each(gunRights, function(index, value) {\n                //console.log();\n                $.each(value, function(index, value) {\n                    gunOrgs.push(value.name);\n                    //Add to group arrays for counting sides\n                    gunRightsGroups.push(value.name);\n                });\n            });\n        }\n        gunControlGroups = _.uniqBy(gunControlGroups);\n        console.log('GUNCONTROLGROUPS', gunControlGroups);\n        gunRightsGroups = _.uniqBy(gunRightsGroups);\n        console.log('GUNRIGHTSGROUPS', gunRightsGroups);\n\n        //GUN ORG COUNTS\n        gunOrgCounts = _.countBy(gunOrgs);\n\n        //Build top line of gun orgs csv\n        //var csvOrgData = \"year,\";\n        var orgArray = [\"year\"];\n        $.each(gunOrgCounts, function(index, value) {\n            //csvOrgData += index+\",\";\n            orgArray.push(index);\n        });\n        var csvOrgData = orgArray + \"\\n\";\n\n\n\n        /*---------------------------------------------------------------\n        \t\t\t BUILD TREE MAP csv\n        ---------------------------------------------------------------*/\n\n        var csvData = \"id,value\\n\";\n        csvData += \"flare,\\n\";\n\n        for (i = startYear; i <= endYear; i++) {\n\n            //FOR GUN ORG CHART\n            yearArray = [i.toString()];\n\n            csvData += \"flare.\" + i.toString() + \",\\n\";\n            var group1header = false;\n            var group2header = false;\n            //console.log(i);\n            $.each(data.spending, function(index, value) {\n                if (index === 0) {\n                    group = \"gc\";\n                    //console.log(\"     \"+group);\n                    //console.log(value.gunControl[i.toString()]);\n                    if (!group1header) {\n                        //console.log(\"false: \"+group1header);\n                        csvData += \"flare.\" + i.toString() + \".\" + group + \",\\n\";\n                        $.each(value.gunControl[i.toString()], function(ind, val) {\n                            //console.log(val.name);\n\n                            var orgIndex = $.inArray(val.name, orgArray);\n                            if (parseInt(val.expenditures) > 0) {\n                                yearArray[orgIndex] = val.expenditures;\n                            }\n\n                            csvData += \"flare.\" + i.toString() + \".\" + group + \".\" + val.name + \",\" + val.expenditures + \"\\n\";\n                        });\n                        group1header = true;\n                    }\n                }\n            });\n            $.each(data.spending, function(index, value) {\n                if (index === 1) {\n                    group = \"gr\";\n                    //console.log(\"     \"+group);\n                    //console.log(value.gunControl[i.toString()]);\n                    if (!group2header) {\n                        //console.log(\"false: \"+group2header);\n                        csvData += \"flare.\" + i.toString() + \".\" + group + \",\\n\";\n                        $.each(value.gunRights[i.toString()], function(ind, val) {\n                            //console.log(val.name);\n\n                            var orgIndex = $.inArray(val.name, orgArray);\n                            if (parseInt(val.expenditures) > 0) {\n                                yearArray[orgIndex] = val.expenditures;\n                            }\n\n\n                            csvData += \"flare.\" + i.toString() + \".\" + group + \".\" + val.name + \",\" + val.expenditures + \"\\n\";\n                        });\n                        group2header = true;\n                    }\n                }\n            });\n            //console.log(yearArray);\n            csvOrgData += yearArray + \"\\n\";\n        }\n\n\n        /*---------------------------------------------------------------\n                    BUILD YEAR CHART json\n        ---------------------------------------------------------------*/\n\n        // Loop through every year\n        for (i = startYear; i <= endYear; i++) {\n\n            // Blank object to be pushed into yearData for first chart\n            mainYear = {};\n            mainYear.Year = i;\n\n            // Initialize annual totals to 0\n            gunRightsAnnuals[i] = 0;\n            gunControlAnnuals[i] = 0;\n\n            //console.log(\"    Gun Rights\");\n            gunRights[i.toString()].forEach(function(year) {\n                //console.log(parseInt(year.expenditures));\n                gunRightsAnnuals[i.toString()] += parseInt(year.expenditures);\n            });\n\n            //console.log(\"    Gun Control\");\n            gunControl[i.toString()].forEach(function(year) {\n                //console.log(parseInt(year.expenditures));\n                gunControlAnnuals[i.toString()] += parseInt(year.expenditures);\n            });\n\n\n\n            mainYear[\"Gun Control\"] = gunControlAnnuals[i.toString()];\n            mainYear[\"Gun Rights\"] = gunRightsAnnuals[i.toString()];\n            mainYear.total = parseInt(gunControlAnnuals[i.toString()]) + parseInt(gunRightsAnnuals[i.toString()]);\n\n            yearData.push(mainYear);\n\n        }\n\n        /*---------------------------------------------------------------\n                    BUILD TOTALS CHART\n        ---------------------------------------------------------------*/\n        var gunControlTotals = 0;\n        var gunRightsTotal = 0;\n\n        $.each(yearData, function(key, val) {\n            gunControlTotals += val[\"Gun Control\"];\n            gunRightsTotal += val[\"Gun Rights\"];\n        });\n\n        buildTotalsChart(gunControlTotals, gunRightsTotal);\n        buildYearChart(yearData);\n        buildOrgChart(csvOrgData);\n        buildTreeChart(csvData);\n\n    });\n\n\n\n    // injecting current year into footer\n    // DO NOT DELETE\n\n    var d = new Date();\n    var year = d.getFullYear();\n\n    $('.copyright').text(year);\n\n\n\n});\n","// Uses CommonJS, AMD or browser globals to create a jQuery plugin.\n\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = function( root, jQuery ) {\n            if ( jQuery === undefined ) {\n                // require('jQuery') returns a factory that requires window to\n                // build a jQuery instance, we normalize how we use modules\n                // that require this pattern but the window provided is a noop\n                // if it's defined (how jquery works)\n                if ( typeof window !== 'undefined' ) {\n                    jQuery = require('jquery');\n                }\n                else {\n                    jQuery = require('jquery')(root);\n                }\n            }\n            factory(jQuery);\n            return jQuery;\n        };\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n    $.fn.dnLoader = function(action) {\n\n        var self = this;\n\n\n        // placeholder variable that will hold the body's initial position value\n        var bodyPosition = \"\";\n\n        // if displaying the loader ...\n        if (action === \"display\") {\n\n            // grab the body's current position\n            bodyPosition = self.css(\"position\");\n\n            // add our no-scroll class, set the position to relative\n            self.addClass(\"no-scroll\").css(\"position\", \"relative\");\n\n            // display the loader\n            $(\"#dnloader\").fadeIn(500);\n        }\n\n        // if removing the loader\n        if (action === \"remove\") {\n            // remove the no-scroll class from the body, reset the body's position value, and remove the loader\n            self.removeClass(\"no-scroll\").css(\"position\", bodyPosition).find($(\".dn-loader-block\")).fadeOut(500);\n        }\n    };\n}));\n"]}