{"version":3,"sources":["+listBills.js","+orgChart.js","+swaps.js","+totalsChart.js","+treeChart.js","+yearChart.js","+custom.js","+loader.js"],"names":["imgerror","image","style","display","sortCounts","objects","sortable","object","push","sort","a","b","switchGunBills","year","console","log","$","empty","billURL","subjects","text","getJSON","done","data","getPercentage","total","val","pct","Math","round","numberOfBills","statusArray","sponsorArray","partyArray","lobbiedArray","groupsArray","html","each","k","v","status","billDate","Date","parse","introduced","lobbied","sponsor","party","billNumberArray","number","split","toUpperCase","title","purpose","dateArray","monthNames","parseInt","join","key","last_name","govtrack_id","first_name","state","in_office","facebookSVG","twitterSVG","youtubeSVG","websiteSVG","countObj","govtrack","append","$divs","dateOrderedDivs","attr","subjectCounts","_","countBy","subjectList","groupCounts","groupList","partyCounts","partyList","click","this","selected","toggleClass","hide","find","show","statusCounts","lobbiedCounts","sponsorCounts","obj","maxLobbiedCount","barClass","inArray","gunControlGroups","maxStatusCount","splitArray","maxPartyCount","buildOrgChart","orgMargin","left","right","top","bottom","width","height","d3","csvParse","max","d","minDate","min","maxDate","x","scaleLinear","domain","range","y","xAxis","axisBottom","tickFormat","format","yAxis","axisLeft","orgSvg","select","orgGroup","call","series","columns","slice","map","value","serie","selectAll","enter","line","defined","filter","swapContent","side","removeClass","addClass","fadeOut","fadeIn","total_gc_content","annual_gc_content","tree_gc_content","legislation_gc_content","fbHead","storyURL","gcUrl","fbURL","fbgcUrl","leadText","storyTitle","shareTitle","gcTwitter","storyIMG","total_gr_content","annual_gr_content","tree_gr_content","legislation_gr_content","grUrl","fbgrUrl","grTwitter","buildTotalsChart","gunControlTotal","gunRightsTotal","grTotalPct","css","buildTreeChart","csvData","draw","leaves","id","rawGroup","group","substring","lastIndexOf","x0","y0","x1","y1","gunColors","on","window","switchData","toString","length","root","stratify","sum","treemap","scaleOrdinal","parentId","size","padding","currentYear","buildYearChart","yearChartSVG","margin","scaleBand","rangeRound","align","Year","nice","z","stack","categories","ticks","tickSize","pop","keys","bandwidth","heroWidth","i","remove","legend","reverse","load","dnLoader","document","ready","urlParam","name","results","RegExp","exec","location","href","heroHeight","resize","scrollTop","triggerDistance","offset","gunMoney","startYear","endYear","gunControlAnnuals","gunRightsAnnuals","gunOrgs","yearData","gunControl","spending","gunRights","index","gunRightsGroups","uniqBy","gunOrgCounts","orgArray","csvOrgData","yearArray","group1header","group2header","ind","orgIndex","expenditures","mainYear","forEach","gunControlTotals","getFullYear","factory","define","amd","module","exports","jQuery","undefined","require","fn","action","self","bodyPosition","encodedIMGURL","encodeURIComponent","encodedURL","FB","ui","method","link","picture","description","open"],"mappings":"AAUA,QAAAA,UAAAC,GACAA,EAAAC,MAAAC,QAAA,OAIA,QAAAC,YAAAC,GACA,GAAAC,KACA,KAAA,GAAAC,KAAAF,GACAC,EAAAE,MAAAD,EAAAF,EAAAE,IAMA,OALAD,GAAAG,KACA,SAAAC,EAAAC,GACA,MAAAA,GAAA,GAAAD,EAAA,KAGAJ,EAIA,QAAAM,gBAAAC,GAEAC,QAAAC,IAAA,wDAGAC,EAAA,cAAAC,OAGA,IAAAC,GAAA,gBAAAL,EAAA,QAYAM,IAGAH,GAAA,cAAAI,KAAAP,GAGAG,EAAAK,QAAAH,GAAAI,KAAA,SAAAC,GA+QA,QAAAC,GAAAC,EAAAC,GAEA,MADAC,KAAAD,EAAAD,EAAA,IACAE,IAAA,GACA,GACAA,IAAA,EACA,EAEAC,KAAAC,MAAAF,KAnRA,GAAAG,GAAA,EAEAC,KAEAC,KAEAC,KAEAC,KAEAC,IAKAnB,GAAA,cAAAoB,KAAA,IAEApB,EAAA,gBAAAC,QAAAmB,KAAA,yCACApB,EAAA,iBAAAC,QAAAmB,KAAA,wCACApB,EAAA,cAAAC,QAAAmB,KAAA,uCAEApB,EAAAqB,KAAAd,EAAA,SAAAe,EAAAC,GACA,GAAA,oBAAAA,EAAA,sBAAA,WAAAA,EAAA,sBAAA,wBAAAA,EAAA,sBAAA,gCAAAA,EAAA,sBAAA,aAAAA,EAAA,sBAAA,UAAAA,EAAA,sBAAA,wBAAAA,EAAA,sBAAA,uBAAAA,EAAA,sBAAA,+BAAAA,EAAA,qBAAA,CAGAT,IACAC,EAAAvB,KAAA+B,EAAAC,OAGA,IAAAC,GAAAC,KAAAC,MAAAJ,EAAAK,YAEAR,EAAA,EACAA,IAAA,mBAAAK,EAAA,cAAAF,EAAA,qBAAA,kBAAAA,EAAAM,QAAA,kBAAAN,EAAAO,QAAAC,MAAA,kBAGAC,gBAAAT,EAAAU,OAAAC,MAAA,KACAd,GAAA,8CAAAY,gBAAA,GAAAG,cAAA,UAGAf,GAAA,+BAAAG,EAAA,qBAAA,UACApB,EAAAX,KAAA+B,EAAA,sBAIAH,GADAG,EAAA,eACA,6BAAAA,EAAA,eAAA,OAEA,6BAAAA,EAAAa,MAAA,OAKAhB,GADA,QAAAG,EAAAc,QACA,2BAAAd,EAAAc,QAAA,OAEA,kDAIA,IAAAC,GAAAf,EAAAK,WAAAM,MAAA,IACAd,IAAA,6DAAAmB,WAAAC,SAAAF,EAAA,IAAA,GAAA,IAAAA,EAAA,GAAA,KAAAA,EAAA,GAAA,SAEA,IAAAA,GAAAf,EAAA,aAAAW,MAAA,IAiBA,IAfAd,GAAA,qEAAAmB,WAAAC,SAAAF,EAAA,IAAA,GAAA,IAAAA,EAAA,GAAA,KAAAA,EAAA,GAAA,UAEAlB,GAAA,2DAAAG,EAAAC,OAAAiB,KAAA,QAAA,UAIAzC,EAAAqB,KAAAE,EAAAM,QAAA,SAAAa,EAAAhC,GACAQ,EAAA1B,KAAAkB,GACAS,EAAA3B,KAAAkB,KAEAU,GAAA,oEAAAG,EAAAM,QAAAY,KAAA,MAAA,UAEArB,GAAA,qEAAAY,gBAAA,GAAA,IAAAA,gBAAA,GAAA,2CAGAT,EAAAO,QAAAa,UAAA,CAGA,MAAApB,EAAAO,QAAAC,MACAX,GAAA,6CACA,MAAAG,EAAAO,QAAAC,QACAX,GAAA,4CAGAA,GAAA,gCAGAG,EAAAO,QAAAc,cAEAxB,GAAA,mCACA,MAAAG,EAAAO,QAAAC,MACAX,GAAA,YACA,MAAAG,EAAAO,QAAAC,QACAX,GAAA,aAEAA,GAAA,oEAAAG,EAAAO,QAAAc,YAAA,wBAKA3B,EAAAzB,KAAA+B,EAAAO,QAAAC,OAEAX,GAAA,wCAAAG,EAAAO,QAAAM,MAAA,KAAAb,EAAAO,QAAAe,WAAA,IAAAtB,EAAAO,QAAAa,UAAA,KAAApB,EAAAO,QAAAC,MAAA,IAAAR,EAAAO,QAAAgB,MAAA,WAGA1B,GADAG,EAAAO,QAAAiB,aAAA,EACA,wDAEA,4DAIAxB,EAAAO,QAAA,cACAV,GAAA,4DAAAG,EAAAO,QAAA,YAAA,qBAAAkB,YAAA,QAEAzB,EAAAO,QAAA,aACAV,GAAA,2DAAAG,EAAAO,QAAA,WAAA,qBAAAmB,WAAA,QAEA1B,EAAAO,QAAA,aACAV,GAAA,2DAAAG,EAAAO,QAAA,WAAA,qBAAAoB,WAAA,QAEA3B,EAAAO,QAAA,UACAV,GAAA,mCAAAG,EAAAO,QAAA,QAAA,qBAAAqB,WAAA,QAGA/B,GAAA,aAEA,IAAAgC,KACAA,GAAArB,MAAAR,EAAAO,QAAAC,MACAqB,EAAAC,SAAA9B,EAAAO,QAAAc,YACAQ,EAAAT,UAAApB,EAAAO,QAAAa,UACAS,EAAAP,WAAAtB,EAAAO,QAAAe,WACAO,EAAAL,UAAAxB,EAAAO,QAAAiB,UACA/B,EAAAxB,KAAA4D,OAIAhC,IAAA,kCACAA,GAAA,gCACAA,GAAA,+EACAA,GAAA,aAIAA,IAAA,SAEApB,EAAA,cAAAsD,OAAAlC,MAIAmC,MAAAvD,EAAA,QAEA,IAAAwD,GAAAD,MAAA9D,KAAA,SAAAC,EAAAC,GACA,MAAAK,GAAAN,GAAA+D,KAAA,aAAAzD,EAAAL,GAAA8D,KAAA,cAEAzD,GAAA,cAAAoB,KAAAoC,EAIA,IAAAE,GAAAC,EAAAC,QAAAzD,GAGA0D,IACA7D,GAAAqB,KAAAqC,EAAA,SAAAhB,EAAAhC,GACAmD,EAAArE,KAAAkD,KAEAmB,EAAApE,OACAO,EAAAqB,KAAAwC,EAAA,SAAAnB,EAAAhC,GACAV,EAAA,cAAAsD,OAAA,+BAAA5C,EAAA,KAAAA,EAAA,YAKA,IAAAoD,GAAAH,EAAAC,QAAAzC,GAGA4C,IACA/D,GAAAqB,KAAAyC,EAAA,SAAApB,EAAAhC,GACAqD,EAAAvE,KAAAkD,KAEAqB,EAAAtE,OACAO,EAAAqB,KAAA0C,EAAA,SAAArB,EAAAhC,GACAV,EAAA,gBAAAsD,OAAA,iCAAA5C,EAAA,KAAAA,EAAA,YAKA,IAAAsD,GAAAL,EAAAC,QAAA3C,GAGAgD,IACAjE,GAAAqB,KAAA2C,EAAA,SAAAtB,EAAAhC,GACAuD,EAAAzE,KAAAkD,KAEAuB,EAAAxE,OACAO,EAAAqB,KAAA4C,EAAA,SAAAvB,EAAAhC,GACAV,EAAA,iBAAAsD,OAAA,iCAAA5C,EAAA,KAAAA,EAAA,aAGAV,EAAA,QAAAkE,MAAA,WAIA,GAAAlE,EAAAmE,MAAA5D,KAAA,OAAA,CACA,GAAA6D,GAAApE,EAAAmE,MAAA5D,KAAA,MACAP,GAAAmE,MAAAE,YAAA,gBACArE,EAAA,SAAAsE,OACAtE,EAAA,cAAAuE,KAAA,cAAAH,EAAA,MAAAC,YAAA,gBACArE,EAAA,iBAAAwE,OAGA,GAAAxE,EAAAmE,MAAA5D,KAAA,SAAA,CAEA,GAAA6D,GAAApE,EAAAmE,MAAA5D,KAAA,QACAP,GAAAmE,MAAAE,YAAA,gBACArE,EAAA,SAAAsE,OACAtE,EAAA,cAAAuE,KAAA,gBAAAH,EAAA,MAAAC,YAAA,gBACArE,EAAA,iBAAAwE,OAGA,GAAAxE,EAAAmE,MAAA5D,KAAA,SAAA,CAEA,GAAA6D,GAAApE,EAAAmE,MAAA5D,KAAA,QACAP,GAAAmE,MAAAE,YAAA,gBACArE,EAAA,SAAAsE,OAEAtE,EAAA,cAAAuE,KAAA,kBAAAH,EAAA,MAAAC,YAAA,gBAEArE,EAAA,iBAAAwE,UAWAC,aAAAd,EAAAC,QAAA7C,GAIA2D,cAAAf,EAAAC,QAAA1C,GAIAyD,cAAAhB,EAAAC,QAAA5C,EAAA,SAAA4D,GACA,MAAAA,GAAAjC,YASA8B,aAAArF,WAAAqF,cACAT,EAAA5E,WAAA4E,GACAU,cAAAtF,WAAAsF,eACAC,cAAAvF,WAAAuF,eAmBA3E,EAAA,UAAAC,QAAAmB,KAAA,6DAAAvB,EAAA,QACA,IAIAgF,GAAAH,cAAA,GAAA,EACA1E,GAAAqB,KAAAqD,cAAA,SAAApD,EAAAC,GACA,GAAAuD,EACA1D,MAAA,6BAEA0D,EADA9E,EAAA+E,QAAAxD,EAAA,GAAAyD,mBAAA,EACA,KAEA,KAEA5D,MAAA,gCAAAG,EAAA,GAAA,UACAH,MAAA,mCACAA,MAAA,kCAAA0D,EAAA,kBAAAtE,EAAAqE,EAAAtD,EAAA,IAAA,0CAAAA,EAAA,GAAA,SACAH,MAAA,cACAA,MAAA,SACApB,EAAA,UAAAsD,OAAAlC,QAeApB,EAAA,aAAAC,QAAAmB,KAAA,iEAAAvB,EAAA,QACA,IACAoF,GAAAR,aAAA,GAAA,EACAzE,GAAAqB,KAAAoD,aAAA,SAAAnD,EAAAC,GACAH,KAAA,4BACA,IAAA8D,GAAA3D,EAAA,GAAAW,MAAA,IACAd,OAAA,gCAAA8D,EAAAzC,KAAA,QAAA,UACArB,MAAA,mCACAA,MAAA,gDAAAZ,EAAAyE,EAAA1D,EAAA,IAAA,6DAAAA,EAAA,GAAA,SACAH,MAAA,cACAA,MAAA,SACApB,EAAA,aAAAsD,OAAAlC,QAGApB,EAAA,YAAAC,QAAAmB,KAAA,uDAAAvB,EAAA,QACA,IACAsF,GAAAnB,EAAA,GAAA,EAEAhE,GAAAqB,KAAA2C,EAAA,SAAA1C,EAAAC,GAIA,OAFAH,KAAA,6BAEAG,EAAA,IACA,IAAA,IACAH,MAAA,gDACA,MACA,KAAA,IACAA,MAAA,8CACA,MACA,KAAA,IACAA,MAAA,iDACA,MACA,SACAA,MAAA,4CAMA,OAFAA,MAAA,8BAEAG,EAAA,IACA,IAAA,IACAH,MAAA,iDAAAZ,EAAA2E,EAAA5D,EAAA,IAAA,0CAAAA,EAAA,GAAA,QACA,MACA,KAAA,IACAH,MAAA,+CAAAZ,EAAA2E,EAAA5D,EAAA,IAAA,0CAAAA,EAAA,GAAA,QACA,MACA,SACAH,MAAA,wBAAAG,EAAA,GAAA,kBAAAf,EAAA2E,EAAA5D,EAAA,IAAA,0CAAAA,EAAA,GAAA,SAKAH,MAAA,cACAA,MAAA,SACApB,EAAA,YAAAsD,OAAAlC,UCzaA,QAAAgE,eAAA7E,GACAT,QAAAC,IAAA,sDAEA,IAOAsF,IAAAC,KAAA,GAAAC,MAAA,GAAAC,IAAA,GAAAC,OAAA,IACAC,EAAA1F,EAAA,aAAA0F,QACAC,EAAA,IAGApF,EAAAqF,GAAAC,SAAAtF,GAEAuF,EAAAF,GAAAE,IAAAvF,EAAA,SAAAwF,GAAA,MAAAvD,UAAAuD,EAAA,6BACAC,EAAAJ,GAAAK,IAAA1F,EAAA,SAAAwF,GAAA,MAAAvD,UAAAuD,EAAAlG,QACAqG,EAAAN,GAAAE,IAAAvF,EAAA,SAAAwF,GAAA,MAAAvD,UAAAuD,EAAAlG,QACAsG,EAAAP,GAAAQ,cACAC,QAAAL,EAAAE,IACAI,OAAA,EAAAZ,IACAa,EAAAX,GAAAQ,cACAC,QAAA,EAAAP,IACAQ,OAAAX,EAAA,IACAa,EAAAZ,GAAAa,WAAAN,GACAO,WAAAd,GAAAe,OAAA,KACAC,EAAAhB,GAAAiB,SAAAN,GACAG,WAAAd,GAAAe,OAAA,QAEAG,EAAAlB,GAAAmB,OAAA,aACAzD,OAAA,OACAG,KAAA,SAAAkC,EAAAN,EAAAI,QACAhC,KAAA,QAAAiC,GAEAsB,EAAAF,EAAAxD,OAAA,KACAG,KAAA,YAAA,aAAA4B,EAAAC,KAAA,OAEA0B,GAAA1D,OAAA,KAAAG,KAAA,QAAA,UAAAA,KAAA,YAAA,eAAAkC,EAAA,KAAAsB,KAAAT,GACAQ,EAAA1D,OAAA,KAAAG,KAAA,QAAA,UAAAwD,KAAAL,EAEA,IAAAM,GAAA3G,EAAA4G,QAAAC,MAAA,GAAAC,IAAA,SAAA3E,GACA,MAAAnC,GAAA8G,IAAA,SAAAtB,GACA,OACArD,IAAAA,EACA7C,KAAAkG,EAAAlG,KACAyH,MAAAvB,EAAArD,QAQA6E,EAAAP,EAAAQ,UAAA,UACAjH,KAAA2G,GACAO,QAAAnE,OAAA,KACAG,KAAA,QAAA,QAEA8D,GAAAjE,OAAA,QACAG,KAAA,QAAA,QACAvE,MAAA,SAAA,SAAA6G,GAAA,MAAAA,GAAA,GAAArD,MACAe,KAAA,IAAAmC,GAAA8B,OACAvB,EAAA,SAAAJ,GAAA,MAAAQ,GAAAR,EAAAlG,QACA0G,EAAA,SAAAR,GAAA,MAAAQ,GAAAR,EAAAuB,SAEA,IAAAI,GAAA9B,GAAA8B,OACAC,QAAA,SAAA5B,GACA,GAAAA,EAAAuB,MAAA,EAAA,MAAAvB,KACAQ,EAAA,SAAAR,GAAA,MAAAQ,GAAAR,EAAAuB,SACAnB,EAAA,SAAAJ,GAAA,MAAAI,GAAAJ,EAAAlG,OAEAmH,GAAA1D,OAAA,QAAAG,KAAA,IAAAiE,EAAAnH,IAEAyG,EAAAQ,UAAA,QACAjH,KAAAA,EAAAqH,OAAA,SAAA7B,GAAA,GAAAA,EAAA,0BAAA,EAAA,MAAAA,MACA0B,QAAAnE,OAAA,UACAG,KAAA,QAAA,OACAA,KAAA,KAAAiE,EAAAvB,KACA1C,KAAA,KAAAiE,EAAAnB,KACA9C,KAAA,IAAA,GCjFA,QAAAoE,aAAAC,GAEAhI,QAAAC,IAAA,0CAAA+H,EAAA,mBAEA,OAAAA,GACAhI,QAAAC,IAAA,UAAA+H,GACA9H,EAAA,YAAA+H,YAAA,WAAAC,SAAA,WACAhI,EAAA,YAAA+H,YAAA,WAAAC,SAAA,WACAhI,EAAA,mBAAA+H,YAAA,MAAAC,SAAA,MACAhI,EAAA,aAAAiI,QAAA,OAAA,WACAjI,EAAA,aAAAkI,WAMAlI,EAAA,uBAAAI,KAAA+H,kBACAnI,EAAA,sBAAAI,KAAAgI,mBACApI,EAAA,sBAAAI,KAAAiI,iBACArI,EAAA,0BAAAI,KAAAkI,wBACAtI,EAAA,YAAAiI,UACAjI,EAAA,YAAAkI,SAEAK,OAAA,6BACAC,SAAAC,MACAC,MAAAC,QACAC,SAAA,+EACAC,WAAAC,WAAAC,UACAC,SAAA,0EAIAlJ,QAAAC,IAAA,UAAA+H,GACA9H,EAAA,YAAA+H,YAAA,WAAAC,SAAA,WACAhI,EAAA,YAAA+H,YAAA,WAAAC,SAAA,WACAhI,EAAA,mBAAA+H,YAAA,MAAAC,SAAA,MACAhI,EAAA,aAAAiI,QAAA,OAAA,WACAjI,EAAA,aAAAkI,WAGAlI,EAAA,uBAAAI,KAAA6I,kBACAjJ,EAAA,sBAAAI,KAAA8I,mBACAlJ,EAAA,sBAAAI,KAAA+I,iBACAnJ,EAAA,0BAAAI,KAAAgJ,wBACApJ,EAAA,YAAAiI,UACAjI,EAAA,YAAAkI,SAEAK,OAAA,2CACAC,SAAAa,MACAX,MAAAY,QACAV,SAAA,qFACAC,WAAAC,WAAAS,UACAP,SAAA,yEAIAhJ,EAAA,sBAAAI,MAAA,SAAA0H,EAAA,aCxDA,QAAA0B,kBAAAC,EAAAC,GAEA5J,QAAAC,IAAA,yDAIA,IAAAU,GAAAgJ,EAAAC,EAEAC,EAAA/I,KAAAC,MAAA6I,EAAAjJ,EAAA,IAGAT,GAAA,qBAAAoB,KAAA,IAAAwE,GAAAe,OAAA,OAAA+C,IACA1J,EAAA,qBAAAoB,KAAA,IAAAwE,GAAAe,OAAA,OAAA8C,IACAzJ,EAAA,UAAA4J,IAAA,QAAAD,EAAA,KACA3J,EAAA,UAAA4J,IAAA,QAAA,IAAAD,EAAA,KCdA,QAAAE,gBAAAC,GA8DA,QAAAC,GAAAxJ,GACAP,EAAA,cAAAC,QACA2F,GAAAmB,OAAA,cACAS,UAAA,SACAjH,KAAAA,EAAAyJ,UACAvC,QAAAnE,OAAA,OACAG,KAAA,QAAA,QACAA,KAAA,QAAA,SAAAsC,GACA,GAAA3D,GAAA2D,EAAAkE,GACAC,EAAA9H,EAAAF,MAAA,YACAiI,EAAAD,EAAA,GAAAE,UAAAF,EAAA,GAAAG,YAAA,KAAA,EACA,OAAAF,KAEA1G,KAAA,cAAA,SAAAsC,GACA,MAAAA,GAAAuB,QAEApI,MAAA,OAAA,SAAA6G,GACA,MAAAA,GAAAuE,GAAA,OAEApL,MAAA,MAAA,SAAA6G,GACA,MAAAA,GAAAwE,GAAA,OAEArL,MAAA,QAAA,SAAA6G,GACA,MAAAA,GAAAyE,GAAAzE,EAAAuE,GAAA,OAEApL,MAAA,SAAA,SAAA6G,GACA,MAAAA,GAAA0E,GAAA1E,EAAAwE,GAAA,OAEArL,MAAA,aAAA,SAAA6G,GACA,GAAAb,GAAAa,EAAAkE,GAAA/H,MAAA,IACA,OAAA,OAAAgD,EAAA,GACAwF,EAAA,GAEAA,EAAA,KAGAC,GAAA,YAAA,SAAA5E,GACAjG,QAAAC,IAAA,YACA,IAAAqB,GAAA,+BAAApB,EAAAmE,MAAAV,KAAA,SAAA,SACArC,IAAA,IAAAuF,EAAA3G,EAAAmE,MAAAV,KAAA,gBACAzD,EAAA,oBAAAoB,KAAAA,GACApB,EAAA,oBAAAwE,OACAxE,EAAA4K,QAAAlF,SAAA,KACA1F,EAAA,2BAAAsE,SAIAqG,GAAA,WAAA,WACA7K,QAAAC,IAAA,cAEAuD,OAAA,OACAG,KAAA,QAAA,cACArD,KAAA,SAAA2F,GACA,GAAAL,GAAAK,EAAAyE,GAAAzE,EAAAuE,GACA3E,EAAAI,EAAA0E,GAAA1E,EAAAwE,EACA,IAAA7E,GAAA,IAAAC,GAAA,GACA,MAAAI,GAAAkE,GAAAG,UAAArE,EAAAkE,GAAAI,YAAA,KAAA,GAAAnI,MAAA,oBAAAO,KAAA,QAIAa,OAAA,OACAG,KAAA,QAAA,cACArD,KAAA,SAAA2F,GACA,GAAAL,GAAAK,EAAAyE,GAAAzE,EAAAuE,GACA3E,EAAAI,EAAA0E,GAAA1E,EAAAwE,EACA,IAAA7E,GAAA,IAAAC,GAAA,GACA,MAAA,IAAAgB,EAAAZ,EAAAuB,SAOA,QAAAuD,GAAAhL,GACAC,QAAAC,IAAA,cAAAF,EAAA,IAEA,IAAAU,GAAAqF,GAAAC,SAAAiE,EAAA,SAAA/D,GACA,GAAAb,GAAAa,EAAAkE,GAAA/H,MAAA,IACA,IAAAgD,EAAA,KAAArF,EAAAiL,YAAA,GAAA5F,EAAA6F,OACA,OACAd,GAAAlE,EAAAkE,GACA3C,OAAAvB,EAAAuB,QAIAxH,SAAAC,IAAAQ,EAEA,IAAAyK,GAAAC,EAAA1K,GACA2K,IAAA,SAAAnF,GACA,MAAAA,GAAAuB,QAEA7H,KAAA,SAAAC,EAAAC,GACA,MAAAA,GAAAgG,OAAAjG,EAAAiG,QAAAhG,EAAA2H,MAAA5H,EAAA4H,OAEAxH,SAAAC,IAAAiL,GAEAG,EAAAH,GACAjB,EAAAiB,GA5JApF,GAAAmB,OAAA,QAAAzD,OAAA,OACAG,KAAA,QAAA,WACAvE,MAAA,UAAA,EAOAY,SAAAC,IAAA,uDAIA,IAAA2F,GAAA1F,EAAA,cAAA0F,QACAC,EAAA,IAEA+E,GAAA,UAAA,WAGA/D,EAAAf,GAAAe,OAAA,QAMAsE,GAJArF,GAAAwF,eACA/E,QAAA,KAAA,OACAC,MAAAoE,GAEA9E,GAAAqF,WACAI,SAAA,SAAAtF,GACA,MAAAA,GAAAkE,GAAAG,UAAA,EAAArE,EAAAkE,GAAAI,YAAA,SAGAc,EAAAvF,GAAAuF,UACAG,MAAA5F,EAAAC,IACA4F,QAAA,GACA1K,OAAA,GAEAN,EAAAqF,GAAAC,SAAAiE,EAAA,SAAA/D,GACA,GAAAb,GAAAa,EAAAkE,GAAA/H,MAAA,IACA,IAAAgD,EAAA,KAAAsG,aAAA,GAAAtG,EAAA6F,OACA,OACAd,GAAAlE,EAAAkE,GACA3C,OAAAvB,EAAAuB,SAOA0D,EAAAC,EAAA1K,GACA2K,IAAA,SAAAnF,GACA,MAAAA,GAAAuB,QAEA7H,KAAA,SAAAC,EAAAC,GACA,MAAAA,GAAAgG,OAAAjG,EAAAiG,QAAAhG,EAAA2H,MAAA5H,EAAA4H,OAKA6D,GAAAH,GAyEAjB,EAAAiB,GA8BApL,eAAA4L,aAIAxL,EAAA,iBAAAkE,MAAA,WACAsH,YAAAxL,EAAAmE,MAAA5D,KAAA,gBACAsK,EAAAW,aACA5L,eAAA4L,aACA1L,QAAAC,IAAAyL,aACAxL,EAAA,aAAAI,KAAAoL,eC5KA,QAAAC,gBAAAlL,GAEAT,QAAAC,IAAA,uDAGA,IAAA2F,GAAA1F,EAAA,cAAA0F,QACAC,EAAA,IAEA+E,GAAA,UAAA,WAQAgB,EAAA9F,GAAAmB,OAAA,cAAAzD,OAAA,OAAAG,KAAA,QAAAiC,GAAAjC,KAAA,SAAAkC,GACAgG,GACAnG,IAAA,EACAD,MAAA,EACAE,OAAA,GACAH,KAAA,GAEAI,GAAAA,EAAAiG,EAAArG,KAAAqG,EAAApG,MACAI,EAAAA,EAAAgG,EAAAnG,IAAAmG,EAAAlG,OACA0E,MAAAuB,EAAApI,OAAA,KAAAG,KAAA,YAAA,aAAAkI,EAAArG,KAAA,IAAAqG,EAAAnG,IAAA,IAQA,IAAAW,GAAAP,GAAAgG,YACAC,YAAA,EAAAnG,IACA6F,QAAA,IACAO,MAAA,GAGA3F,GAAAE,OAAA9F,EAAA8G,IAAA,SAAAtB,GACA,MAAAA,GAAAgG,OASA,IAAAxF,GAAAX,GAAAQ,cACAyF,YAAAlG,EAAA,GAGAY,GAAAF,QAAA,EAAAT,GAAAE,IAAAvF,EAAA,SAAAwF,GACA,MAAAA,GAAAtF,UACAuL,MAOA,IAAAC,GAAArG,GAAAwF,eACA9E,OAAAoE,EAAA,GAAAA,EAAA,IAGAuB,GAAA5F,QAAA,cAAA,cAOA,IAAA6F,GAAAtG,GAAAsG,QAQAC,GAAA,cAAA,aAEAhC,OAAA7G,OAAA,KACAG,KAAA,QAAA,gBACAA,KAAA,YAAA,eAAAkC,EAAA,KACAsB,KAAArB,GAAAa,WAAAN,IAEAgE,MAAA7G,OAAA,KACAG,KAAA,QAAA,gBACAwD,KAAArB,GAAAiB,SAAAN,GAAA6F,MAAA,GAAA,KAAAC,SAAA3G,OACApC,OAAA,QACAG,KAAA,IAAA,GACAA,KAAA,IAAA8C,EAAAA,EAAA6F,MAAA,IAAAE,QACA7I,KAAA,KAAA,UAGA0G,MAAA3C,UAAA,UACAjH,KAAA2L,EAAAK,KAAAJ,GAAA5L,IACAkH,QAAAnE,OAAA,KACAG,KAAA,QAAA,SACAA,KAAA,OAAA,SAAAsC,GACA,MAAAkG,GAAAlG,EAAArD,OAEA8E,UAAA,QACAjH,KAAA,SAAAwF,GACA,MAAAA,KAEA0B,QAAAnE,OAAA,QACAG,KAAA,IAAA,SAAAsC,GACA,MAAAI,GAAAJ,EAAAxF,KAAAwL,QAEAtI,KAAA,IAAA,SAAAsC,GACA,MAAAQ,GAAAR,EAAA,MAEAtC,KAAA,SAAA,SAAAsC,GACA,MAAAQ,GAAAR,EAAA,IAAAQ,EAAAR,EAAA,MAEAtC,KAAA,QAAA0C,EAAAqG,YAMA,IAAAC,GAAAzM,EAAA,YAAA0F,OACA,IAAA+G,EAAA,IAAA,CACA,GAAAL,GAAAxG,GAAA4B,UAAA,aACA4E,GAAA3I,KAAA,QAAA,SAAAsC,EAAA2G,GACAA,EAAA,GAAA,GAAA9G,GAAAmB,OAAA5C,MAAAwI,WASA,GAAAC,GAAAzC,MAAA3C,UAAA,WACAjH,KAAA4L,EAAAU,WACApF,QAAAnE,OAAA,KACAG,KAAA,QAAA,UACAA,KAAA,YAAA,SAAAsC,EAAA2G,GACA,MAAA,eAAA,GAAAA,EAAA,MAEAxN,MAAA,OAAA,kBAEA0N,GAAAtJ,OAAA,QACAG,KAAA,IAAA,IACAA,KAAA,IAAA,GACAA,KAAA,QAAA,IACAA,KAAA,SAAA,IACAA,KAAA,OAAAwI,GAEAW,EAAAtJ,OAAA,QACAG,KAAA,IAAA,IACAA,KAAA,IAAA,IACAA,KAAA,KAAA,SACAA,KAAA,cAAA,SACArD,KAAA,SAAA2F,GACA,MAAAA,KC/JA/F,EAAA4K,QAAAkC,KAAA,WACA9M,EAAA,QAAA+M,SAAA,YAGA/M,EAAAgN,UAAAC,MAAA,WAGAjN,EAAAkN,SAAA,SAAAC,GACA,GAAAC,GAAA,GAAAC,QAAA,OAAAF,EAAA,aAAAG,KAAA1C,OAAA2C,SAAAC,KAEA,OAAAJ,GACAA,EAAA,IAAA,EAEA,KAGA,IAAAtF,GAAA9H,EAAAkN,SAAA,OACApN,SAAAC,IAAA+H,GAGAD,YAAAC,EAIA,IAAA2F,GAAAzN,EAAA,YAAA2F,QACA3F,GAAA,SAAA2F,OAAA8H,GAEAzN,EAAA4K,QAAA8C,OAAA,WACAD,EAAAzN,EAAA,YAAA2F,SACA3F,EAAA,SAAA2F,OAAA8H,KAGAzN,EAAA4K,QAAAD,GAAA,SAAA,WACA,GAAAgD,GAAA3N,EAAAmE,MAAAwJ,YACAC,EAAA5N,EAAA,cAAA6N,SAAArI,GACAoI,GAAA,IAAAD,EACA3N,EAAA,sBAAAkI,SAEAlI,EAAA,sBAAAsE,QAIA,IAAAwJ,GAAA,2BAEAC,EAAA,IACAC,EAAA,KAEAC,KACAC,KAKAC,KAEAC,IAEA,KAAA1B,EAAAqB,EAAArB,GAAAsB,EAAAtB,IACA1M,EAAA,cAAAsD,OAAA,yBAAAoJ,EAAA,IAAAA,EAAA,QAGA1M,GAAAK,QAAAyN,GAAAxN,KAAA,SAAAC,GAGA,GAAA8N,GAAA9N,EAAA+N,SAAA,GAAAD,WACAE,EAAAhO,EAAA+N,SAAA,GAAAC,SAUA,KAAA7B,EAAAqB,EAAArB,GAAAsB,EAAAtB,IACA1M,EAAAqB,KAAAgN,EAAA,SAAAG,EAAAlH,GAEAtH,EAAAqB,KAAAiG,EAAA,SAAAkH,EAAAlH,GACA6G,EAAA3O,KAAA8H,EAAA6F,MAEAnI,iBAAAxF,KAAA8H,EAAA6F,UAGAnN,EAAAqB,KAAAkN,EAAA,SAAAC,EAAAlH,GAEAtH,EAAAqB,KAAAiG,EAAA,SAAAkH,EAAAlH,GACA6G,EAAA3O,KAAA8H,EAAA6F,MAEAsB,gBAAAjP,KAAA8H,EAAA6F,SAIAnI,kBAAArB,EAAA+K,OAAA1J,kBACAyJ,gBAAA9K,EAAA+K,OAAAD,iBAIAE,aAAAhL,EAAAC,QAAAuK,EAIA,IAAAS,IAAA,OACA5O,GAAAqB,KAAAsN,aAAA,SAAAH,EAAAlH,GAEAsH,EAAApP,KAAAgP,IAEA,IAAAK,GAAAD,EAAA,KAQA9E,EAAA,YAGA,KAFAA,GAAA,WAEA4C,EAAAqB,EAAArB,GAAAsB,EAAAtB,IAAA,CAGAoC,WAAApC,EAAA5B,YAEAhB,GAAA,SAAA4C,EAAA5B,WAAA,KACA,IAAAiE,IAAA,EACAC,GAAA,CAEAhP,GAAAqB,KAAAd,EAAA+N,SAAA,SAAAE,EAAAlH,GACA,IAAAkH,IACArE,MAAA,KAGA4E,IAEAjF,GAAA,SAAA4C,EAAA5B,WAAA,IAAAX,MAAA,MACAnK,EAAAqB,KAAAiG,EAAA+G,WAAA3B,EAAA5B,YAAA,SAAAmE,EAAAvO,GAGA,GAAAwO,GAAAlP,EAAA+E,QAAArE,EAAAyM,KAAAyB,EACApM,UAAA9B,EAAAyO,cAAA,IACAL,UAAAI,GAAAxO,EAAAyO,cAGArF,GAAA,SAAA4C,EAAA5B,WAAA,IAAAX,MAAA,IAAAzJ,EAAAyM,KAAA,IAAAzM,EAAAyO,aAAA,OAEAJ,GAAA,MAIA/O,EAAAqB,KAAAd,EAAA+N,SAAA,SAAAE,EAAAlH,GACA,IAAAkH,IACArE,MAAA,KAGA6E,IAEAlF,GAAA,SAAA4C,EAAA5B,WAAA,IAAAX,MAAA,MACAnK,EAAAqB,KAAAiG,EAAAiH,UAAA7B,EAAA5B,YAAA,SAAAmE,EAAAvO,GAGA,GAAAwO,GAAAlP,EAAA+E,QAAArE,EAAAyM,KAAAyB,EACApM,UAAA9B,EAAAyO,cAAA,IACAL,UAAAI,GAAAxO,EAAAyO,cAIArF,GAAA,SAAA4C,EAAA5B,WAAA,IAAAX,MAAA,IAAAzJ,EAAAyM,KAAA,IAAAzM,EAAAyO,aAAA,OAEAH,GAAA,MAKAH,GAAAC,UAAA,KASA,IAAApC,EAAAqB,EAAArB,GAAAsB,EAAAtB,IAGA0C,YACAA,SAAArD,KAAAW,EAGAwB,EAAAxB,GAAA,EACAuB,EAAAvB,GAAA,EAGA6B,EAAA7B,EAAA5B,YAAAuE,QAAA,SAAAxP,GAEAqO,EAAAxB,EAAA5B,aAAAtI,SAAA3C,EAAAsP,gBAIAd,EAAA3B,EAAA5B,YAAAuE,QAAA,SAAAxP,GAEAoO,EAAAvB,EAAA5B,aAAAtI,SAAA3C,EAAAsP,gBAKAC,SAAA,eAAAnB,EAAAvB,EAAA5B,YACAsE,SAAA,cAAAlB,EAAAxB,EAAA5B,YACAsE,SAAA3O,MAAA+B,SAAAyL,EAAAvB,EAAA5B,aAAAtI,SAAA0L,EAAAxB,EAAA5B,aAEAsD,EAAA5O,KAAA4P,SAOA,IAAAE,GAAA,EACA5F,EAAA,CAEA1J,GAAAqB,KAAA+M,EAAA,SAAA1L,EAAAhC,GACA4O,GAAA5O,EAAA,eACAgJ,GAAAhJ,EAAA,gBAGA8I,iBAAA8F,EAAA5F,GACA+B,eAAA2C,GACAhJ,cAAAyJ,GACAhF,eAAAC,IASA,IAAA/D,GAAA,GAAArE,MACA7B,EAAAkG,EAAAwJ,aAEAvP,GAAA,cAAAI,KAAAP,INhPA,IAAAmD,aAAA,ufAEAC,WAAA,88BAEAC,WAAA,+bAEAC,WAAA,0XOJA,SAAAqM,GACA,kBAAAC,SAAAA,OAAAC,IAEAD,QAAA,UAAAD,GACA,gBAAAG,SAAAA,OAAAC,QAEAD,OAAAC,QAAA,SAAA5E,EAAA6E,GAcA,MAbAC,UAAAD,IAMAA,EADA,mBAAAjF,QACAmF,QAAA,UAGAA,QAAA,UAAA/E,IAGAwE,EAAAK,GACAA,GAIAL,EAAAK,SAEA,SAAA7P,GACAA,EAAAgQ,GAAAjD,SAAA,SAAAkD,GAEA,GAAAC,GAAA/L,KAIAgM,EAAA,EAGA,aAAAF,IAGAE,EAAAD,EAAAtG,IAAA,YAGAsG,EAAAlI,SAAA,aAAA4B,IAAA,WAAA,YAGA5J,EAAA,aAAAkI,OAAA,MAIA,WAAA+H,GAEAC,EAAAnI,YAAA,aAAA6B,IAAA,WAAAuG,GAAA5L,KAAAvE,EAAA,qBAAAiI,QAAA,QLkBAjI,EAAA,cAAAkE,MAAA,WACA2D,YAAA,QAEA7H,EAAA,cAAAkE,MAAA,WACA2D,YAAA,OAIA,IAAAuI,eAAAC,mBAAArH,UAEAsH,WAAAD,mBAAA7H,SAGAxI,GAAA,YAAAkE,MAAA,WAEApE,QAAAC,IAAAwI,OAAA,KAAAK,UACA2H,GAAAC,IACAC,OAAA,OACAtD,KAAA5E,OACAmI,KAAAhI,MAGAiI,QAAA3H,SACA4H,YAAAhI,aAIA5I,EAAA,YAAAkE,MAAA,WACApE,QAAAC,IAAA,aAAAyI,UAGAoC,OAAAiG,KAAA,oEAAAjI,SAAA,wBAAAJ,SAAA,UAAA4H,cAAA","file":"scripts-bundle.js","sourcesContent":["var facebookSVG = '<svg class=\"social\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"35px\" height=\"35px\" viewBox=\"0 0 100 100\"><rect id=\"square\" fill=\"#D8D8D8\" width=\"100\" height=\"100\"/><path id=\"facebook\" fill=\"#FFFFFF\" d=\"M35.959,40.223h6.034v-5.865c0-2.588,0.065-6.576,1.944-9.046\tc1.979-2.618,4.696-4.397,9.369-4.397c7.611,0,10.818,1.086,10.818,1.086l-1.508,8.942c0,0-2.518-0.728-4.862-0.728\tc-2.351,0-4.448,0.842-4.448,3.188v6.821h9.623l-0.673,8.734h-8.95v30.342H41.994V48.957h-6.034V40.223z\"/></svg>';\n\nvar twitterSVG = '<svg class=\"social\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"35px\" height=\"35px\" viewBox=\"0 0 100 100\"><rect id=\"square\" fill=\"#D8D8D8\" width=\"100\" height=\"100\"/><path id=\"twitter\" fill=\"#FFFFFF\" d=\"M77.877,32.706c-2.051,0.911-4.258,1.525-6.569,1.803c2.362-1.416,4.176-3.659,5.028-6.328\tc-2.212,1.311-4.657,2.26-7.266,2.771c-2.082-2.221-5.058-3.611-8.349-3.611c-6.313,0-11.435,5.126-11.435,11.441\tc0,0.897,0.097,1.767,0.294,2.604c-9.506-0.479-17.932-5.027-23.577-11.955c-0.984,1.696-1.549,3.662-1.549,5.759\tc0,3.962,2.02,7.468,5.089,9.52c-1.874-0.058-3.64-0.576-5.183-1.429v0.141c0,5.544,3.942,10.168,9.178,11.218\tc-0.96,0.269-1.97,0.402-3.015,0.402c-0.737,0-1.456-0.067-2.151-0.202c1.454,4.542,5.677,7.852,10.684,7.941\tc-3.916,3.068-8.848,4.896-14.205,4.896c-0.924,0-1.836-0.052-2.729-0.156c5.062,3.243,11.075,5.138,17.534,5.138\tc21.042,0,32.543-17.429,32.543-32.551c0-0.496-0.01-0.991-0.03-1.479C74.405,37.014,76.348,35.001,77.877,32.706\"/></svg>';\n\nvar youtubeSVG = '<svg class=\"social\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"35px\" height=\"35px\" viewBox=\"0 0 100 100\"><rect id=\"square\" fill=\"#D8D8D8\" width=\"100\" height=\"100\"/><path id=\"youtube\" fill=\"#FFFFFF\" d=\"M60.825,50.137L41.487,61.494V38.776L60.825,50.137z M78.886,60.667V39.546\tc0,0,0-10.181-10.179-10.181h-38.71c0,0-10.173,0-10.173,10.181v21.121c0,0,0,10.181,10.173,10.181h38.71\tC68.707,70.848,78.886,70.848,78.886,60.667\"/></svg>';\n\nvar websiteSVG = '<svg class=\"social\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"35px\" height=\"35px\" viewBox=\"0 0 100 100\"><rect id=\"square\" fill=\"#D8D8D8\" width=\"100\" height=\"100\"/><rect id=\"webbox\" x=\"20\" y=\"29\" fill=\"#FFFFFF\" width=\"59\" height=\"42\"/><text transform=\"matrix(1 0 0 1 24.3213 54.5156)\" fill=\"#D8D8D8\" font-family=\"OpenSans-Bold\" font-size=\"20\">www</text></svg>';\n\n\n//Hide any image that throws a 404\nfunction imgerror(image) {\n    image.style.display = 'none';\n}\n\n//Sort counts for objects\nfunction sortCounts(objects) {\n    var sortable = [];\n    for (var object in objects)\n        sortable.push([object, objects[object]]);\n    sortable.sort(\n        function(a, b) {\n            return b[1] - a[1];\n        }\n    );\n    return sortable;\n}\n\n//Switch gun bill info based on year\nfunction switchGunBills(year) {\n\n    console.log(\"--------------   In switchGunBills()  --------------\");\n\n    //Clear out content\n    $('#bill-list').empty();\n\n    //Set data urls in one place\n    var billURL = \"data/gunBills\" + year + \".json\";\n    //var sponsorsURL = \"data/gunSponsors.json\";\n\n    //To hold parsed sponsor data\n    var sponsors = {};\n\n    //We're going to count who sponsored the most\n    var totalRepublicans = 0;\n    var totalDemocrats = 0;\n    var totalOther = 0;\n\n    //We're going to count by subject\n    var subjects = [];\n\n    //Stick year on end of heads\n    $(\".head-year\").text(year);\n\n    //Get bill information\n    $.getJSON(billURL).done(function(data) {\n\n        //Holds number fo bills\n        var numberOfBills = 0;\n        //Hold counts for each status\n        var statusArray = [];\n        //Hold counts for each sponsor\n        var sponsorArray = [];\n        //Hold counts for each party\n        var partyArray = [];\n        //Hold counts for each group\n        var lobbiedArray = [];\n        //Hold counts for each sponsor\n        var groupsArray = [];\n        //Hold counts for each subject\n        var subjectsArray = [];\n\n        //Reset list div\n        $('#bill-list').html(\"\")\n\n        $(\"#bill-groups\").empty().html(\"<strong>View by groups:</strong><br/>\");\n        $(\"#bill-parties\").empty().html(\"<strong>View by party:</strong><br/>\");\n        $(\"#bill-tags\").empty().html(\"<strong>View by tags:</strong><br/>\");\n\n        $.each(data, function(k, v) {\n            if (v[\"subjects-top-term\"] != \"Native Americans\" && v[\"subjects-top-term\"] != \"Animals\" && v[\"subjects-top-term\"] != \"Agriculture and food\" && v[\"subjects-top-term\"] != \"Economics and public finance\" && v[\"subjects-top-term\"] != \"Education\" && v[\"subjects-top-term\"] != \"Energy\" && v[\"subjects-top-term\"] != \"Labor and employment\" && v[\"subjects-top-term\"] != \"Private legislation\" && v[\"subjects-top-term\"] != \"Water resources development\") {\n\n                //Increment totals\n                numberOfBills++;\n                statusArray.push(v.status);\n                //sponsorArray.push(v.sponsor.first_name+\" \"+v.sponsor.last_name);\n\n                var billDate = Date.parse(v.introduced);\n\n                var html = \"\";\n                html += \"<div data-date='\" + billDate + \"'data-tag='\" + v[\"subjects-top-term\"] + \"' data-groups='\"+ v.lobbied+\"'  data-party='\"+v.sponsor.party+\"' class='bill'>\";\n\n                //Bill number\n                billNumberArray = v.number.split(\"-\");\n                html += \"     <span class='bill-header bill-number'>\" + billNumberArray[0].toUpperCase() + \"</span>\";\n\n                //Bill subject used for tagging\n                html += \"     <span class='bill-tag'>\" + v[\"subjects-top-term\"] + \"</span>\";\n                subjects.push(v[\"subjects-top-term\"]);\n\n                //Short title if available\n                if (v[\"short-title\"]) {\n                    html += \"     <p class='bill-name'>\" + v[\"short-title\"] + \"</p>\";\n                } else {\n                    html += \"     <p class='bill-name'>\" + v.title + \"</p>\";\n                }\n\n                //Purpose if available\n                if (v.purpose != \"null\") {\n                    html += \"<p class='bill-purpose'>\" + v.purpose + \"</p>\";\n                } else {\n                    html += \"<p class='bill-purpose'>No purpose specified</p>\";\n                }\n                //Bill introduction date\n                //Date introduced\n                var dateArray = v.introduced.split(\"-\");\n                html += \"     <span class='bill-date'><strong>Introduced: </strong>\"+monthNames[(parseInt(dateArray[1]) - 1)] + \" \" + dateArray[2] + \", \" + dateArray[0] +\"</span>\"\n                //Date introduced\n                var dateArray = v[\"status-at\"].split(\"-\");\n                //console.log(dateArray);\n                html += \"     <span class='bill-date'><strong>Most recent update: </strong>\"+monthNames[(parseInt(dateArray[1]) - 1)] + \" \" + dateArray[2] + \", \" + dateArray[0] +\"</span>\"\n                //Bill status\n                html += \"     <span class='bill-status'><strong>Status: </strong>\" + v.status.join(\" => \") + \"</span>\";\n\n                // Lobbied list\n                //console.log(v.lobbied);\n                $.each(v.lobbied, function (key,val){\n                    lobbiedArray.push(val);\n                    groupsArray.push(val);\n               });\n                html += \"     <span class='sponsor-lobbied'><strong>Lobbied by: </strong> \" + v.lobbied.join(', ') + \"</span>\";\n\n                html += \"<a class='bill-link' href='https://www.govtrack.us/congress/bills/\"+billNumberArray[1]+\"/\"+billNumberArray[0]+\"/text' target='_blank'>Read the bill</a>\";\n\n                //Bill sponsor\n                if (v.sponsor.last_name) {\n\n                    //Sponsor party\n                    if (v.sponsor.party === \"R\"){\n                        html += \"     <div class='bill-sponsor republican'>\";\n                    } else if (v.sponsor.party === \"D\"){\n                        html += \"     <div class='bill-sponsor democrat'>\";\n                    }\n\n                    html += \"     <strong>Sponsor</strong>\";\n\n                    //If govtrack then we have a photo\n                    if( v.sponsor.govtrack_id ){\n                        //Sponsor mug\n                        html += \"     <div class='mugBox clearFix\";\n                        if (v.sponsor.party === \"R\"){\n                            html += \" mugBoxR \";\n                        } else if (v.sponsor.party === \"D\"){\n                            html += \" mugBoxD \";\n                        }\n                         html += \"'><img class='bill-mug' src='https://www.govtrack.us/data/photos/\" + v.sponsor.govtrack_id + \"-100px.jpeg'/></div>\";\n                    }\n\n\n                    //Hold parties for counting\n                    partyArray.push(v.sponsor.party);\n\n                    html += \"          <span class='sponsor-name'>\" + v.sponsor.title + \". \" + v.sponsor.first_name + \" \" + v.sponsor.last_name + \" (\" + v.sponsor.party + \"-\" + v.sponsor.state + \")</span>\";\n                    //Sponsor status\n                    if (v.sponsor.in_office === true) {\n                        html += \"<span class='sponsor-status'>Status: In office</span>\";\n                    } else {\n                        html += \"<span class='sponsor-status'>Status: Out of office</span>\";\n                    }\n\n                    //console.log(v);\n                    if (v.sponsor[\"facebook_id\"]){\n                        html += \"<a class='social-buttons' href='https://www.facebook.com/\"+v.sponsor['facebook_id']+\"' target='_blank'>\"+facebookSVG+\"</a>\";\n                    }\n                    if (v.sponsor[\"twitter_id\"]){\n                        html += \"<a class='social-buttons' href='https://www.twitter.com/\"+v.sponsor['twitter_id']+\"' target='_blank'>\"+twitterSVG+\"</a>\";\n                    }\n                    if (v.sponsor[\"youtube_id\"]){\n                        html += \"<a class='social-buttons' href='https://www.youtube.com/\"+v.sponsor['youtube_id']+\"' target='_blank'>\"+youtubeSVG+\"</a>\";\n                    }\n                    if (v.sponsor[\"website\"]){\n                        html += \"<a class='social-buttons' href='\"+v.sponsor['website']+\"' target='_blank'>\"+websiteSVG+\"</a>\";\n                    }\n\n                    html += \"     </div>\";\n\n                    var countObj = {};\n                    countObj.party = v.sponsor.party;\n                    countObj.govtrack = v.sponsor.govtrack_id;\n                    countObj.last_name = v.sponsor.last_name;\n                    countObj.first_name = v.sponsor.first_name;\n                    countObj.in_office = v.sponsor.in_office;\n                    sponsorArray.push(countObj);\n\n\n                } else {\n                    html += \"     <div class='bill-sponsor'>\";\n                    html += \"     <strong>Sponsor</strong>\";\n                    html += \"          <span class='sponsor-name'>No sponsor information available</span>\";\n                    html += \"     </div>\";\n                }\n\n\n                html += \"</div>\";\n\n                $('#bill-list').append(html);\n            }\n\n        });\n        $divs = $(\".bill\");\n\n        var dateOrderedDivs = $divs.sort(function(a, b) {\n            return $(a).attr(\"data-date\") - $(b).attr(\"data-date\");\n        });\n        $(\"#bill-list\").html(dateOrderedDivs);\n\n\n        //Build, display and activate subject tags\n        var subjectCounts = _.countBy(subjects);\n        //console.log(subjectCounts);\n\n        var subjectList = [];\n        $.each(subjectCounts, function(key, val) {\n            subjectList.push(key);\n        });\n        subjectList.sort();\n        $.each(subjectList, function(key, val) {\n            $(\"#bill-tags\").append(\"<span class='tag' data-tag='\" + val + \"'>\" + val + \"</span>\");\n        });\n\n\n        //Build, display and activate subject tags\n        var groupCounts = _.countBy(groupsArray);\n        //console.log(groupCounts);\n\n        var groupList = [];\n        $.each(groupCounts, function(key, val) {\n            groupList.push(key);\n        });\n        groupList.sort();\n        $.each(groupList, function(key, val) {\n            $(\"#bill-groups\").append(\"<span class='tag' data-group='\" + val + \"'>\" + val + \"</span>\");\n        });\n\n        //Build, display and activate subject tags\n        //console.log(partyArray);\n        var partyCounts = _.countBy(partyArray);\n        //console.log(partyCounts);\n\n        var partyList = [];\n        $.each(partyCounts, function(key, val) {\n            partyList.push(key);\n        });\n        partyList.sort();\n        $.each(partyList, function(key, val) {\n            $(\"#bill-parties\").append(\"<span class='tag' data-party='\" + val + \"'>\" + val + \"</span>\");\n        });\n\n        $(\".tag\").click(function() {\n\n            //console.log(\"Clicked a tag.\")\n            //IF ITS A TAG BUTTON\n            if ( $(this).data(\"tag\") ){\n                var selected = $(this).data(\"tag\");\n                $(this).toggleClass(\"selected-tag\");\n                $(\".bill\").hide();\n                $('#bill-list').find(\"[data-tag='\" + selected + \"']\").toggleClass(\"selected-tag\");\n                $(\".selected-tag\").show();\n            };\n            //IF ITS A PARTY BUTTON\n            if ( $(this).data(\"party\") ){\n                //console.log($(this).data(\"party\"));\n                var selected = $(this).data(\"party\");\n                $(this).toggleClass(\"selected-tag\");\n                $(\".bill\").hide();\n                $('#bill-list').find(\"[data-party='\" + selected + \"']\").toggleClass(\"selected-tag\");\n                $(\".selected-tag\").show();\n            };\n            //IF ITS A GROUP BUTTON\n            if ( $(this).data(\"group\") ){\n                //console.log($(this).data(\"group\"));\n                var selected = $(this).data(\"group\");\n                $(this).toggleClass(\"selected-tag\");\n                $(\".bill\").hide();\n\n                $('#bill-list').find(\"[data-groups*='\" + selected + \"']\").toggleClass(\"selected-tag\");\n\n                $(\".selected-tag\").show();\n            };\n\n\n\n        });\n\n\n\n        //Do counts\n        //STATUS COUNTS\n        statusCounts = _.countBy(statusArray);\n        //console.log(statusCounts);\n\n        //ORG COUNTS\n        lobbiedCounts = _.countBy(lobbiedArray);\n        //console.log(lobbiedCounts);\n\n        //SPONSOR COUNTS\n        sponsorCounts = _.countBy(sponsorArray, function(obj){\n            return obj.last_name;\n        });\n\n        //console.log(sponsorCounts);\n\n        // //Get top 3 sponsors\n        // sponsorCountsArray = sortable.slice(0, 3);\n        // console.log(sponsorCountsArray);\n\n        statusCounts = sortCounts(statusCounts);\n        partyCounts = sortCounts(partyCounts);\n        lobbiedCounts = sortCounts(lobbiedCounts);\n        sponsorCounts = sortCounts(sponsorCounts);\n\n        //console.log(lobbiedCounts);\n        //console.log(statusCounts);\n        //console.log(partyCounts);\n        //console.log(sponsorCounts);\n\n        function getPercentage(total,val){\n            pct = val/total*100;\n            if (pct>90){\n                return 90;\n            } else if (pct<1){\n                return 1;\n            } else {\n                return Math.round(pct);\n            }\n        }\n\n\n        $(\".byOrg\").empty().html(\"<h3>Organizations and the number of bills they lobbied in \"+year+\"</h3>\");\n        var lobbiedTotal;\n        // $.each(lobbiedCounts, function(k, v) {\n        //     console.log(parseInt(v[1]));\n        // });\n        var maxLobbiedCount = lobbiedCounts[0][1]\n        $.each(lobbiedCounts, function(k, v) {\n            var barClass;\n             html = \"<div class='list-element'>\";\n             if ($.inArray(v[0], gunControlGroups) >= 0){\n                barClass = \"gc\";\n             } else {\n                barClass = \"gr\";\n             }\n             html += \"     <span class='list-item'>\"+v[0]+\"</span>\";\n             html += \"     <div class='bar-container'>\";\n             html += \"          <div class='list-bar \"+barClass+\"' style='width:\"+getPercentage(maxLobbiedCount,v[1])+\"%'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n             html += \"     </div>\";\n             html += \"</div>\";\n            $(\".byOrg\").append(html);\n        });\n\n\n        // $(\".bySponsor\").empty().html(\"<h3>The top five sponsors of gun-related legislation</h3>\");\n        // for ( i=1; i<=5; i++){\n        //     if ( sponsorCounts[i][0] ){\n        //         //console.log(i);\n        //         html = \"<li>\"+sponsorCounts[i][0]+\": \" + sponsorCounts[i][1] + \" pieces of legislation.</li>\";\n        //         $(\".bySponsor\").append(html);\n        //     } else {\n        //         //console.log(i);\n        //     }\n        // }\n\n        $(\".byStatus\").empty().html(\"<h3>Status breakdown of gun-related legislation introduced in \"+year+\"</h3>\");\n        var statusTotal;\n        var maxStatusCount = statusCounts[0][1];\n        $.each(statusCounts, function(k, v) {\n            html = \"<div class='list-element'>\";\n            var splitArray = v[0].split(\",\");\n            html += \"     <span class='list-item'>\"+splitArray.join(\" => \")+\"</span>\";\n            html += \"     <div class='bar-container'>\";\n            html += \"          <div class='list-bar' style='width:\"+getPercentage(maxStatusCount,v[1])+\"%;background:#BF531B'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n            html += \"     </div>\";\n            html += \"</div>\";\n            $(\".byStatus\").append(html);\n        });\n\n        $(\".byParty\").empty().html(\"<h3> Gun-related legislation introduced by party in \"+year+\"</h3>\");\n        var partyTotal;\n        var maxPartyCount = partyCounts[0][1]\n\n        $.each(partyCounts, function(k, v) {\n            //console.log(v);\n            html = \"<div class='list-element'>\";\n            //console.log(v[0]);\n            switch (v[0]){\n                case \"R\":\n                    html += \"     <span class='list-item'>Republican</span>\";\n                    break;\n                case \"D\":\n                    html += \"     <span class='list-item'>Democrat</span>\";\n                    break;\n                case \"I\":\n                    html += \"     <span class='list-item'>Independent</span>\";\n                    break;\n                default:\n                    html += \"     <span class='list-item'>Other</span>\";\n                    break;\n            }\n\n            html += \"<div class='bar-container'>\";\n\n            switch (v[0]){\n                case \"R\":\n                    html += \"<div class='list-bar republican' style='width:\"+getPercentage(maxPartyCount,v[1])+\"%'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n                    break;\n                case \"D\":\n                    html += \"<div class='list-bar democrat' style='width:\"+getPercentage(maxPartyCount,v[1])+\"%'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n                    break;\n                default:\n                    html += \"<div class='list-bar \"+v[0]+\"' style='width:\"+getPercentage(maxPartyCount,v[1])+\"%'>&nbsp;</div><div class='bar-number'>\"+v[1]+\"</div>\";\n                    break;\n            }\n\n\n            html += \"     </div>\";\n            html += \"</div>\";\n            $(\".byParty\").append(html);\n        });\n\n\n    });\n}\n","function buildOrgChart(data) {\n    console.log(\"--------------   In buildOrgChart()  --------------\");\n    //console.log(data);\n    var gunColors = [\"#4295DE\", \"#D8322A\"];\n    /*\n    ----------------------------------------\n          INITIALIZE THE SVG CONTAINER\n    ----------------------------------------\n    */\n\n    var orgMargin = {left:50,right:50,top:40,bottom:40};\n    var width = $(\"#orgChart\").width();\n    var height = 500;\n\n    //Parse csv into array of objects\n    var data = d3.csvParse(data);\n    //console.log(data);\n    var max = d3.max(data,function(d){ return parseInt(d[\"Violence Policy Center\"])});\n    var minDate = d3.min(data,function(d){return parseInt(d.year);})\n    var maxDate = d3.max(data,function(d){return parseInt(d.year);})\n    var x = d3.scaleLinear()\n        .domain([minDate,maxDate])\n        .range([0,width]);\n    var y = d3.scaleLinear()\n        .domain([0,max])\n        .range([height,0]);\n    var xAxis = d3.axisBottom(x)\n        .tickFormat(d3.format(\"\"));\n    var yAxis = d3.axisLeft(y)\n        .tickFormat(d3.format(\".2s\"));\n\n    var orgSvg = d3.select(\"#orgChart\")\n        .append(\"svg\")\n            .attr(\"height\",height+orgMargin.bottom)\n            .attr(\"width\",width);\n\n    var orgGroup = orgSvg.append(\"g\")\n        .attr(\"transform\",\"translate(\"+orgMargin.left+\",10)\")\n\n    orgGroup.append(\"g\").attr(\"class\",\"x axis\").attr(\"transform\",\"translate(0,\"+height+\")\").call(xAxis);\n    orgGroup.append(\"g\").attr(\"class\",\"y axis\").call(yAxis);\n\n    var series = data.columns.slice(1).map(function(key) {\n        return data.map(function(d) {\n            return {\n                key: key,\n                year: d.year,\n                value: d[key]\n            };\n        });\n    });\n\n    //console.log(series);\n\n\n    var serie = orgGroup.selectAll(\".serie\")\n        .data(series)\n        .enter().append(\"g\")\n        .attr(\"class\", \"serie\");\n\n    serie.append(\"path\")\n        .attr(\"class\", \"line\")\n        .style(\"stroke\", function(d) { return d[0].key; })\n        .attr(\"d\", d3.line()\n        .x(function(d) { return y(d.year); })\n        .y(function(d) { return y(d.value); }));\n\n    var line = d3.line()\n        .defined(function(d) { //console.log(d);\n            if (d.value>0)return d; })\n        .y(function(d){return y(d.value);})\n        .x(function(d){return x(d.year)});\n\n    orgGroup.append(\"path\").attr(\"d\",line(data));\n\n    orgGroup.selectAll(\".dot\")\n        .data(data.filter(function(d) { if (d[\"Violence Policy Center\"]>0)return d; }))\n        .enter().append(\"circle\")\n        .attr(\"class\", \"dot\")\n        .attr(\"cx\", line.x())\n        .attr(\"cy\", line.y())\n        .attr(\"r\", 7);\n\n}\n","function swapContent(side){\n\n    console.log(\"--------------   In swapContent() with \"+side+\" --------------\");\n\n    if (side === \"gc\"){\n        console.log(\"side = \"+side);\n        $(\".gr-back\").removeClass(\"gr-back\").addClass(\"gc-back\");\n        $(\".gr-dark\").removeClass(\"gr-dark\").addClass(\"gc-dark\");\n        $(\"#hero-border.gr\").removeClass(\"gr\").addClass(\"gc\");\n        $(\"#gr-intro\").fadeOut(\"fast\", function() {\n            $(\"#gc-intro\").fadeIn();\n        });\n        // $(\"#gr-intro\").slideUp(\"slow\", function() {\n        //     $(\"#gc-intro\").slideDown(\"slow\");\n        // });\n        //Swap text\n        $(\"#total-chart .intro\").text(total_gc_content);\n        $(\"#year-chart .intro\").text(annual_gc_content);\n        $(\"#tree-chart .intro\").text(tree_gc_content);\n        $(\"#bill-breakdown .intro\").text(legislation_gc_content);\n        $(\"#hero-gr\").fadeOut();\n        $(\"#hero-gc\").fadeIn();\n\n        fbHead = \"Losing the battle for guns\"\n        storyURL = gcUrl;\n        fbURL = fbgcUrl;\n        leadText = \"Another mass shooting, another futile attempt at out-flanking the gun lobby.\";\n        storyTitle = shareTitle = gcTwitter;\n        storyIMG = \"http://interactives.dallasnews.com/2016/gun-fight/images/_gcShare.jpg\";\n\n\n    } else {\n        console.log(\"side = \"+side);\n        $(\".gc-back\").removeClass(\"gc-back\").addClass(\"gr-back\");\n        $(\".gc-dark\").removeClass(\"gc-dark\").addClass(\"gr-dark\");\n        $(\"#hero-border.gc\").removeClass(\"gc\").addClass(\"gr\");\n        $(\"#gc-intro\").fadeOut(\"fast\", function() {\n            $(\"#gr-intro\").fadeIn();\n        });\n        //Swap text\n        $(\"#total-chart .intro\").text(total_gr_content);\n        $(\"#year-chart .intro\").text(annual_gr_content);\n        $(\"#tree-chart .intro\").text(tree_gr_content);\n        $(\"#bill-breakdown .intro\").text(legislation_gr_content);\n        $(\"#hero-gc\").fadeOut();\n        $(\"#hero-gr\").fadeIn();\n\n        fbHead = \"Lobbyists defending the Second Amendment\"\n        storyURL = grUrl;\n        fbURL = fbgrUrl;\n        leadText = \"Every year the gun lobby spends millions fending off assaults on the Constitution.\";\n        storyTitle = shareTitle = grTwitter;\n        storyIMG = \"http://interactives.dallasnews.com/2016/gun-fight/images/_grShare.jpg\";\n\n    }\n\n    $(\"#totalChart .intro\").text([\"total_\"+side+\"_content\"]);\n\n   //  //SET TWITTER TEXT\n   //  $(\".twitterShare a\").attr(\"href\",'https://twitter.com/intent/tweet?text='+leadText+' %7C @DMNOpinion&url='+storyURL);\n    //\n   //  //SET FACEBOOK shareTitle\n   //  $(\".facebookShare a\").attr(\"href\",'https://www.facebook.com/sharer/sharer.php?u='+encodeURI(storyURL));\n    //\n   //  //SET EMAIL PREFERENCES\n   //  $(\".emailShare a\").attr(\"href\",'mailto:?subject='+encodeURI(storyTitle)+'&body='+encodeURI(storyURL));\n\n}\n\n\n//Switch theme/content button\n$(\".button-gc\").click(function() {\n    swapContent(\"gc\");\n});\n$(\".button-gr\").click(function() {\n    swapContent(\"gr\");\n});\n\n//-----------  SHARING -----------//\nvar encodedIMGURL = encodeURIComponent(storyIMG);\n\nvar encodedURL = encodeURIComponent(storyURL);\n\n\n$(\".fbShare\").click(function() {\n   //Facebook share\n   console.log(fbHead+\": \"+leadText);\n   FB.ui({\n       method: 'feed',\n       name: fbHead,\n       link: fbURL,\n       //link: 'http://interactives.dallasnews.com/test/'+targetName+'/index.html',\n       //caption: 'Use our meme generator to create your own!',\n       picture: storyIMG,\n       description: leadText\n   });\n});\n\n$(\".twShare\").click(function() {\n   console.log(\"storyURL: \"+storyURL);\n   //console.log(\"Share to Twitter:\\nstoryTitle: \" + storyTitle + \"\\nencodedURL: \" + encodedURL + \"\\nencodedIMGURLt: \" + encodedIMGURL);\n   //Twitter share quizShare\n   window.open(\"https://www.twitter.com/intent/tweet?hashtags=2a,guncontrol&text=\" + leadText + \" &via=dallasnews&url=\" + storyURL + \"&image=\" + encodedIMGURL, \"top=200, left=200,width=550,height=420\");\n})\n","function buildTotalsChart(gunControlTotal, gunRightsTotal) {\n\n  console.log(\"--------------   In buildTotalsChart()  --------------\");\n  //console.log(\"gunControlTotal: \" + gunControlTotal);\n  //console.log(\"gunRightsTotal: \" + gunRightsTotal);\n\n  var total = gunControlTotal + gunRightsTotal;\n  //console.log(\"TOTAL: \"+total);\n  var grTotalPct = Math.round(gunRightsTotal / total * 100);\n  //console.log(grTotalPct + \"%\");\n  //console.log(100-grTotalPct + \"%\");\n  $(\"#totals-gr-amount\").html( \"$\"+d3.format(\".2s\")(gunRightsTotal));\n  $(\"#totals-gc-amount\").html( \"$\"+d3.format(\".2s\")(gunControlTotal));\n  $(\"#grBar\").css(\"width\", grTotalPct + \"%\");\n  $(\"#gcBar\").css(\"width\", 100-grTotalPct + \"%\");\n\n}\n","function buildTreeChart(csvData) {\n\n    // Define the div for the tooltip\n    var div = d3.select(\"body\").append(\"div\")\n        .attr(\"class\", \"tooltip\")\n        .style(\"opacity\", 0);\n\n    function type(d) {\n        d.value = +d.value;\n        return d;\n    }\n\n    console.log(\"--------------   In buildTreeChart()  --------------\");\n\n    //console.log(csvData);\n\n    var width = $(\"#treeChart\").width();\n    var height = 500;\n\n    var gunColors = [\"#88C5F2\", \"#E3C357\"];\n\n    //var format = d3.format(\",d\");\n    var format = d3.format(\",.0f\");\n\n    var color = d3.scaleOrdinal()\n        .domain([\"gc\", \"gr\"])\n        .range(gunColors);\n\n    var stratify = d3.stratify()\n        .parentId(function(d) {\n            return d.id.substring(0, d.id.lastIndexOf(\".\"));\n        });\n\n    var treemap = d3.treemap()\n        .size([width, height])\n        .padding(1)\n        .round(true);\n\n    var data = d3.csvParse(csvData, function(d) {\n        var splitArray = d.id.split(\".\");\n        if (splitArray[1] === currentYear || splitArray.length == 1) {\n            return {\n                id: d.id, // lowercase\n                value: +d.value // lowercase\n            };\n        }\n    });\n\n    //console.log(data);\n\n    var root = stratify(data)\n        .sum(function(d) {\n            return d.value;\n        })\n        .sort(function(a, b) {\n            return b.height - a.height || b.value - a.value;\n        });\n\n    //console.log(root);\n\n    treemap(root);\n\n    function draw(data) {\n        $(\"#treeChart\").empty();\n        d3.select(\"#treeChart\")\n            .selectAll(\".node\")\n            .data(data.leaves())\n            .enter().append(\"div\")\n            .attr(\"class\", \"node\")\n            .attr(\"group\", function(d) {\n                var title = d.id;\n                var rawGroup = title.split(/\\r?\\n|\\r/);\n                var group = rawGroup[0].substring(rawGroup[0].lastIndexOf(\".\") + 1)\n                return group;\n            })\n            .attr(\"expenditure\", function(d) {\n                return d.value;\n            })\n            .style(\"left\", function(d) {\n                return d.x0 + \"px\";\n            })\n            .style(\"top\", function(d) {\n                return d.y0 + \"px\";\n            })\n            .style(\"width\", function(d) {\n                return d.x1 - d.x0 + \"px\";\n            })\n            .style(\"height\", function(d) {\n                return d.y1 - d.y0 + \"px\";\n            })\n            .style(\"background\", function(d) {\n                var splitArray = d.id.split(\".\");\n                if (splitArray[2] === \"gr\") {\n                    return gunColors[1];\n                } else {\n                    return gunColors[0];\n                }\n            })\n            .on(\"mouseover\", function(d) {\n                console.log(\"mouseover\");\n                var html = \"<span class='callout-label'>\"+$(this).attr('group')+\"</span>\";\n                    html += \"$\"+ format($(this).attr('expenditure'));\n                $(\".callout-treemap\").html(html);\n                $(\".callout-treemap\").show();\n                if ( $(window).width() >= 1000 ){\n                    $(\".callout-treemap-mobile\").hide();\n                }\n\n            })\n            .on(\"mouseout\", function() {\n                console.log(\"mouseout\");\n            })\n            .append(\"div\")\n            .attr(\"class\", \"node-label\")\n            .text(function(d) {\n                var width = d.x1 - d.x0;\n                var height = d.y1 - d.y0;\n                if (width >= 80 && height >= 80) {\n                    return d.id.substring(d.id.lastIndexOf(\".\") + 1).split(/(?=[A-Z][^A-Z])/g).join(\"\\n\");\n                }\n\n            })\n            .append(\"div\")\n            .attr(\"class\", \"node-value\")\n            .text(function(d) {\n                var width = d.x1 - d.x0;\n                var height = d.y1 - d.y0;\n                if (width >= 80 && height >= 80) {\n                    return \"$\" + format(d.value);\n                }\n            });\n    }\n\n    draw(root);\n\n    function switchData(year) {\n        console.log(\"switchData(\" + year + \")\");\n\n        var data = d3.csvParse(csvData, function(d) {\n            var splitArray = d.id.split(\".\");\n            if (splitArray[1] === year.toString() || splitArray.length == 1) {\n                return {\n                    id: d.id, // lowercase\n                    value: +d.value // lowercase\n                };\n            }\n        });\n        console.log(data);\n\n        var root = stratify(data)\n            .sum(function(d) {\n                return d.value;\n            })\n            .sort(function(a, b) {\n                return b.height - a.height || b.value - a.value;\n            });\n        console.log(root);\n\n        treemap(root);\n        draw(root);\n\n    }\n\n    switchGunBills(currentYear);\n\n    //$(\"#yearSelector\").change(function () {\n    //var year = $(\"#yearSelector\").val();\n    $(\".drop-menu li\").click(function() {\n        currentYear = $(this).data(\"selectedyear\");\n        switchData(currentYear);\n        switchGunBills(currentYear);\n        console.log(currentYear);\n        $(\".pulldown\").text(currentYear);\n    });\n\n\n}\n","function buildYearChart(data) {\n\n  console.log(\"--------------   In buildYearChart()  --------------\");\n  //console.log(data);\n\n  var width = $(\"#yearChart\").width();\n  var height = 500;\n\n  var gunColors = [\"#88C5F2\", \"#E3C357\"];\n\n  /*\n  ----------------------------------------\n        INITIALIZE THE SVG CONTAINER\n  ----------------------------------------\n  */\n\n  var yearChartSVG = d3.select(\"#yearChart\").append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n  var margin = {\n    top: 5,\n    right: 0,\n    bottom: 17,\n    left: 25\n  };\n  width = width - margin.left - margin.right;\n  height = height - margin.top - margin.bottom;\n  group = yearChartSVG.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n  /* RANGES AND DOMAINS\n  ----------------------------------------\n                  X\n  ----------------------------------------\n  */ //Set the X range from 0 - width of div\n  var x = d3.scaleBand()\n    .rangeRound([0, width])\n    .padding(0.1)\n    .align(0.1);\n\n  //Set the X domain to the \"Year\" attribute\n  x.domain(data.map(function (d) {\n    return d.Year;\n  }));\n\n\n  /*\n  ----------------------------------------\n                  Y\n  ----------------------------------------\n  */ //Set the Y range from 0 - width of div\n  var y = d3.scaleLinear()\n    .rangeRound([height, 0]);\n\n  //Set the Y domain to the \"Total\" attribute\n  y.domain([0, d3.max(data, function (d) {\n    return d.total;\n  })]).nice();\n\n  /*\n  ----------------------------------------\n                  Z\n  ----------------------------------------\n  */ //Set the Z range which looks like color bars\n  var z = d3.scaleOrdinal()\n    .range([gunColors[0], gunColors[1]]);\n\n  //Set the Z domain or color key\n  z.domain([\"Gun Control\", \"Gun Rights\"]);\n\n  /*\n  ----------------------------------------\n                   Stack\n  ----------------------------------------\n  */ //sets the stack generator to \"stack\"\n  var stack = d3.stack();\n\n  /*\n  ----------------------------------------\n          Define the categories\n  ----------------------------------------\n  */ //Since the json has other attributes, manually set the ones to chart\n\n  var categories = [\"Gun Control\", \"Gun Rights\"];\n\n  group.append(\"g\")\n    .attr(\"class\", \"axis axis--x\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x));\n\n  group.append(\"g\")\n    .attr(\"class\", \"axis axis--y\")\n    .call(d3.axisLeft(y).ticks(10, \"s\").tickSize(width*-1))\n    .append(\"text\")\n    .attr(\"x\", 2)\n    .attr(\"y\", y(y.ticks(10).pop()))\n    .attr(\"dy\", \"0.35em\");\n\n\n  group.selectAll(\".serie\")\n    .data(stack.keys(categories)(data))\n    .enter().append(\"g\")\n    .attr(\"class\", \"serie\")\n    .attr(\"fill\", function (d) {\n      return z(d.key);\n    })\n    .selectAll(\"rect\")\n    .data(function (d) {\n      return d;\n    })\n    .enter().append(\"rect\")\n    .attr(\"x\", function (d) {\n      return x(d.data.Year);\n    })\n    .attr(\"y\", function (d) {\n      return y(d[1]);\n    })\n    .attr(\"height\", function (d) {\n      return y(d[0]) - y(d[1]);\n    })\n    .attr(\"width\", x.bandwidth());\n\n\n    /*\n    Disable ticks\n    */\n    var heroWidth = $(\"#hero-gc\").width();\n   if (heroWidth < 500) {\n       var ticks = d3.selectAll(\".tick text\");\n       ticks.attr(\"class\", function(d, i) {\n           if (i % 2 != 0) d3.select(this).remove();\n       });\n   }\n\n  /*\n  ----------------------------------------\n        Add the legend\n  ----------------------------------------\n  */\n  var legend = group.selectAll(\".legend\")\n    .data(categories.reverse())\n    .enter().append(\"g\")\n    .attr(\"class\", \"legend\")\n    .attr(\"transform\", function (d, i) {\n      return \"translate(0,\" + i * 20 + \")\";\n    })\n    .style(\"font\", \"10px sans-serif\");\n\n  legend.append(\"rect\")\n    .attr(\"x\", 10)\n    .attr(\"y\", 8)\n    .attr(\"width\", 18)\n    .attr(\"height\", 18)\n    .attr(\"fill\", z);\n\n  legend.append(\"text\")\n    .attr(\"x\", 35)\n    .attr(\"y\", 16)\n    .attr(\"dy\", \".35em\")\n    .attr(\"text-anchor\", \"start\")\n    .text(function (d) {\n      return d;\n    });\n\n}\n","$(window).load(function() {\n    $(\"body\").dnLoader(\"remove\");\n});\n\n$(document).ready(function() {\n\n    //GET URL PARAM\n    $.urlParam = function(name) {\n        var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\n        //if no var then just use \"gc\"\n        if (results) {\n            return results[1] || 0;\n        } else {\n            return \"gc\";\n        }\n    }\n    var side = $.urlParam('side');\n    console.log(side);\n\n    //Initialize display\n    swapContent(side);\n    //$(\"#hero-gr\").hide();\n\n    //Get height of img\n    var heroHeight = $(\"#hero-gc\").height();\n    $(\"#hero\").height(heroHeight);\n\n    $(window).resize(function() {\n        heroHeight = $(\"#hero-gc\").height();\n        $(\"#hero\").height(heroHeight);\n    });\n\n    $(window).on('scroll', function() {\n        var scrollTop = $(this).scrollTop();\n        var triggerDistance = $(\".intro-box\").offset().top;\n        if ((triggerDistance - 100) < scrollTop) {\n            $(\".fixed-buttons-bar\").fadeIn();\n        } else {\n            $(\".fixed-buttons-bar\").hide();\n        }\n    });\n\n    var gunMoney = \"data/gunOrgSpending.json\";\n\n    var startYear = 2000;\n    var endYear = 2016;\n\n    var gunControlAnnuals = {};\n    var gunRightsAnnuals = {};\n\n    var indices = [\"Gun Control\", \"Gun Rights\"];\n\n    //Array of unique gun orgs\n    var gunOrgs = [];\n\n    var yearData = [];\n\n    for (i = startYear; i <= endYear; i++) {\n        $(\".drop-menu\").append(\"<li data-selectedYear=\" + i + \">\" + i + \"</li>\");\n    }\n\n    $.getJSON(gunMoney).done(function(data) {\n\n        // Shortcut to groups\n        var gunControl = data.spending[0].gunControl;\n        var gunRights = data.spending[1].gunRights;\n\n        //Build arrays for each groups\n\n\n        /*---------------------------------------------------------------\n        \t\t\t BUILD ORG FEVERS csv\n        ---------------------------------------------------------------*/\n\n        //Build an array of ALL gun orgs\n        for (i = startYear; i <= endYear; i++) {\n            $.each(gunControl, function(index, value) {\n                //console.log();\n                $.each(value, function(index, value) {\n                    gunOrgs.push(value.name);\n                    //Add to group arrays for counting sides\n                    gunControlGroups.push(value.name);\n                });\n            });\n            $.each(gunRights, function(index, value) {\n                //console.log();\n                $.each(value, function(index, value) {\n                    gunOrgs.push(value.name);\n                    //Add to group arrays for counting sides\n                    gunRightsGroups.push(value.name);\n                });\n            });\n        }\n        gunControlGroups = _.uniqBy(gunControlGroups);\n        gunRightsGroups = _.uniqBy(gunRightsGroups);\n        //console.log(gunRightsGroups);\n\n        //GUN ORG COUNTS\n        gunOrgCounts = _.countBy(gunOrgs);\n\n        //Build top line of gun orgs csv\n        //var csvOrgData = \"year,\";\n        var orgArray = [\"year\"];\n        $.each(gunOrgCounts, function(index, value) {\n            //csvOrgData += index+\",\";\n            orgArray.push(index);\n        });\n        var csvOrgData = orgArray + \"\\n\";\n\n\n\n        /*---------------------------------------------------------------\n        \t\t\t BUILD TREE MAP csv\n        ---------------------------------------------------------------*/\n\n        var csvData = \"id,value\\n\";\n        csvData += \"flare,\\n\";\n\n        for (i = startYear; i <= endYear; i++) {\n\n            //FOR GUN ORG CHART\n            yearArray = [i.toString()];\n\n            csvData += \"flare.\" + i.toString() + \",\\n\";\n            var group1header = false;\n            var group2header = false;\n            //console.log(i);\n            $.each(data.spending, function(index, value) {\n                if (index === 0) {\n                    group = \"gc\";\n                    //console.log(\"     \"+group);\n                    //console.log(value.gunControl[i.toString()]);\n                    if (!group1header) {\n                        //console.log(\"false: \"+group1header);\n                        csvData += \"flare.\" + i.toString() + \".\" + group + \",\\n\";\n                        $.each(value.gunControl[i.toString()], function(ind, val) {\n                            //console.log(val.name);\n\n                            var orgIndex = $.inArray(val.name, orgArray);\n                            if (parseInt(val.expenditures) > 0) {\n                                yearArray[orgIndex] = val.expenditures;\n                            }\n\n                            csvData += \"flare.\" + i.toString() + \".\" + group + \".\" + val.name + \",\" + val.expenditures + \"\\n\";\n                        });\n                        group1header = true;\n                    }\n                }\n            });\n            $.each(data.spending, function(index, value) {\n                if (index === 1) {\n                    group = \"gr\";\n                    //console.log(\"     \"+group);\n                    //console.log(value.gunControl[i.toString()]);\n                    if (!group2header) {\n                        //console.log(\"false: \"+group2header);\n                        csvData += \"flare.\" + i.toString() + \".\" + group + \",\\n\";\n                        $.each(value.gunRights[i.toString()], function(ind, val) {\n                            //console.log(val.name);\n\n                            var orgIndex = $.inArray(val.name, orgArray);\n                            if (parseInt(val.expenditures) > 0) {\n                                yearArray[orgIndex] = val.expenditures;\n                            }\n\n\n                            csvData += \"flare.\" + i.toString() + \".\" + group + \".\" + val.name + \",\" + val.expenditures + \"\\n\";\n                        });\n                        group2header = true;\n                    }\n                }\n            });\n            //console.log(yearArray);\n            csvOrgData += yearArray + \"\\n\";\n        }\n\n\n        /*---------------------------------------------------------------\n                    BUILD YEAR CHART json\n        ---------------------------------------------------------------*/\n\n        // Loop through every year\n        for (i = startYear; i <= endYear; i++) {\n\n            // Blank object to be pushed into yearData for first chart\n            mainYear = {};\n            mainYear.Year = i;\n\n            // Initialize annual totals to 0\n            gunRightsAnnuals[i] = 0;\n            gunControlAnnuals[i] = 0;\n\n            //console.log(\"    Gun Rights\");\n            gunRights[i.toString()].forEach(function(year) {\n                //console.log(parseInt(year.expenditures));\n                gunRightsAnnuals[i.toString()] += parseInt(year.expenditures);\n            });\n\n            //console.log(\"    Gun Control\");\n            gunControl[i.toString()].forEach(function(year) {\n                //console.log(parseInt(year.expenditures));\n                gunControlAnnuals[i.toString()] += parseInt(year.expenditures);\n            });\n\n\n\n            mainYear[\"Gun Control\"] = gunControlAnnuals[i.toString()];\n            mainYear[\"Gun Rights\"] = gunRightsAnnuals[i.toString()];\n            mainYear.total = parseInt(gunControlAnnuals[i.toString()]) + parseInt(gunRightsAnnuals[i.toString()]);\n\n            yearData.push(mainYear);\n\n        }\n\n        /*---------------------------------------------------------------\n                    BUILD TOTALS CHART\n        ---------------------------------------------------------------*/\n        var gunControlTotals = 0;\n        var gunRightsTotal = 0;\n\n        $.each(yearData, function(key, val) {\n            gunControlTotals += val[\"Gun Control\"];\n            gunRightsTotal += val[\"Gun Rights\"];\n        });\n\n        buildTotalsChart(gunControlTotals, gunRightsTotal);\n        buildYearChart(yearData);\n        buildOrgChart(csvOrgData);\n        buildTreeChart(csvData);\n\n    });\n\n\n\n    // injecting current year into footer\n    // DO NOT DELETE\n\n    var d = new Date();\n    var year = d.getFullYear();\n\n    $('.copyright').text(year);\n\n    \n\n});\n","// Uses CommonJS, AMD or browser globals to create a jQuery plugin.\n\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = function( root, jQuery ) {\n            if ( jQuery === undefined ) {\n                // require('jQuery') returns a factory that requires window to\n                // build a jQuery instance, we normalize how we use modules\n                // that require this pattern but the window provided is a noop\n                // if it's defined (how jquery works)\n                if ( typeof window !== 'undefined' ) {\n                    jQuery = require('jquery');\n                }\n                else {\n                    jQuery = require('jquery')(root);\n                }\n            }\n            factory(jQuery);\n            return jQuery;\n        };\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n    $.fn.dnLoader = function(action) {\n\n        var self = this;\n\n\n        // placeholder variable that will hold the body's initial position value\n        var bodyPosition = \"\";\n\n        // if displaying the loader ...\n        if (action === \"display\") {\n\n            // grab the body's current position\n            bodyPosition = self.css(\"position\");\n\n            // add our no-scroll class, set the position to relative\n            self.addClass(\"no-scroll\").css(\"position\", \"relative\");\n\n            // display the loader\n            $(\"#dnloader\").fadeIn(500);\n        }\n\n        // if removing the loader\n        if (action === \"remove\") {\n            // remove the no-scroll class from the body, reset the body's position value, and remove the loader\n            self.removeClass(\"no-scroll\").css(\"position\", bodyPosition).find($(\".dn-loader-block\")).fadeOut(500);\n        }\n    };\n}));\n"]}